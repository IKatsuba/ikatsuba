(self.webpackChunkikatsuba=self.webpackChunkikatsuba||[]).push([[179],{137:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=137,e.exports=t},584:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}let s=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function i(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;i(e)},complete(){}},l=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))();function c(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let h=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:s,_unsubscribe:o,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if(r(o)){s&&(this._unsubscribe=void 0);try{o.call(this)}catch(a){t=a instanceof u?p(a.errors):[a]}}if(l(i)){let e=-1,n=i.length;for(;++e<n;){const n=i[e];if(c(n))try{n.unsubscribe()}catch(a){t=t||[],a instanceof u?t=t.concat(p(a.errors)):t.push(a)}}}if(t)throw new u(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}return e.EMPTY=function(e){return e.closed=!0,e}(new e),e})();function p(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}const d=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class f extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[d](){return this}static create(e,t,n){const r=new f(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let i=this;r(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==a&&(i=Object.create(t),r(i.unsubscribe)&&this.add(i.unsubscribe.bind(i)),i.unsubscribe=this.unsubscribe.bind(this))),this._context=i,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):i(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;i(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;i(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(i(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(e){return e}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,s=function(e,t,n){if(e){if(e instanceof f)return e;if(e[d])return e[d]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(s.add(r?r.call(s,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),o.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=b(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(s){n(s),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=b(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function b(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const v=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class w extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class x extends f{constructor(e){super(e),this.destination=e}}let k=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new x(this)}lift(e){const t=new T(this,this);return t.operator=e,t}next(e){if(this.closed)throw new v;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].next(e)}}error(e){if(this.closed)throw new v;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new v;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new v;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new v;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new w(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new T(e,t),e})();class T extends k{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}class C{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new E(e,this.project,this.thisArg))}}class E extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const S=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()};function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const I=A();const O=e=>{if(e&&"function"==typeof e[g])return s=e,e=>{const t=s[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((t=e)&&"number"==typeof t.length&&"function"!=typeof t)return S(e);var t,n,r,s;if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i),t))(e);if(e&&"function"==typeof e[I])return r=e,e=>{const t=r[I]();for(;;){let r;try{r=t.next()}catch(n){return e.error(n),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e};{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}};class D extends f{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class R extends f{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function M(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(M((n,r)=>{return(s=e(n,r),s instanceof _?s:new _(O(s))).pipe(function(e,t){return function(t){return t.lift(new C(e,void 0))}}((e,s)=>t(n,e,r,s)));var s},n)):("number"==typeof t&&(n=t),t=>t.lift(new j(e,n)))}class j{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new P(e,this.project,this.concurrent))}}class P extends R{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new D(this),n=this.destination;n.add(t);const r=function(e,t){if(t.closed)return;if(e instanceof _)return e.subscribe(t);let n;try{n=O(e)(t)}catch(r){t.error(r)}return n}(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function N(){return function(e){return e.lift(new H(e))}}class H{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new F(e,n),s=t.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class F extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class V extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new Z(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return N()(this)}}const L=(()=>{const e=V.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class Z extends x{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function B(){return new k}function z(e){for(let t in e)if(e[t]===z)return t;throw Error("Could not find renamed property on target object.")}function $(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map($).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function U(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const W=z({__forward_ref__:z});function q(e){return e.__forward_ref__=q,e.toString=function(){return $(this())},e}function G(e){return"function"==typeof(t=e)&&t.hasOwnProperty(W)&&t.__forward_ref__===q?e():e;var t}class Q extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function Y(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function K(e,t){const n=t?` in ${t}`:"";throw new Q("201",`No provider for ${Y(e)} found${n}`)}function J(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function X(e){return{providers:e.providers||[],imports:e.imports||[]}}function ee(e){return te(e,re)||te(e,oe)}function te(e,t){return e.hasOwnProperty(t)?e[t]:null}function ne(e){return e&&(e.hasOwnProperty(se)||e.hasOwnProperty(ie))?e[se]:null}const re=z({"\u0275prov":z}),se=z({"\u0275inj":z}),oe=z({ngInjectableDef:z}),ie=z({ngInjectorDef:z});var ae=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let le;function ce(e){const t=le;return le=e,t}function ue(e,t,n){const r=ee(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ae.Optional?null:void 0!==t?t:void K($(e),"Injector")}function he(e){return{toString:e}.toString()}var pe=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),de=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const fe="undefined"!=typeof globalThis&&globalThis,me="undefined"!=typeof window&&window,ge="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ye="undefined"!=typeof global&&global,_e=fe||ye||me||ge,be={},ve=[],we=z({"\u0275cmp":z}),xe=z({"\u0275dir":z}),ke=z({"\u0275pipe":z}),Te=z({"\u0275mod":z}),Ce=z({"\u0275loc":z}),Ee=z({"\u0275fac":z}),Se=z({__NG_ELEMENT_ID__:z});let Ae=0;function Ie(e){return he(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===pe.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ve,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||de.Emulated,id:"c",styles:e.styles||ve,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,s=e.features,o=e.pipes;return n.id+=Ae++,n.inputs=je(e.inputs,t),n.outputs=je(e.outputs),s&&s.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Oe):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(De):null,n})}function Oe(e){return Pe(e)||function(e){return e[xe]||null}(e)}function De(e){return function(e){return e[ke]||null}(e)}const Re={};function Me(e){const t={type:e.type,bootstrap:e.bootstrap||ve,declarations:e.declarations||ve,imports:e.imports||ve,exports:e.exports||ve,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&he(()=>{Re[e.id]=e.type}),t}function je(e,t){if(null==e)return be;const n={};for(const r in e)if(e.hasOwnProperty(r)){let s=e[r],o=s;Array.isArray(s)&&(o=s[1],s=s[0]),n[s]=r,t&&(t[s]=o)}return n}function Pe(e){return e[we]||null}function Ne(e,t){const n=e[Te]||null;if(!n&&!0===t)throw new Error(`Type ${$(e)} does not have '\u0275mod' property.`);return n}const He=20,Fe=10;function Ve(e){return Array.isArray(e)&&"object"==typeof e[1]}function Le(e){return Array.isArray(e)&&!0===e[1]}function Ze(e){return 0!=(8&e.flags)}function Be(e){return null!==e.template}function ze(e,t){return e.hasOwnProperty(Ee)?e[Ee]:null}class $e{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ue(){const e=qe(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===be)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function We(e,t,n,r){const s=qe(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:be,current:null}),o=s.current||(s.current={}),i=s.previous,a=this.declaredInputs[n],l=i[a];o[a]=new $e(l&&l.currentValue,t,i===be),e[r]=t}function qe(e){return e.__ngSimpleChanges__||null}let Ge;function Qe(e){return!!e.listen}const Ye={createRenderer:(e,t)=>void 0!==Ge?Ge:"undefined"!=typeof document?document:void 0};function Ke(e){for(;Array.isArray(e);)e=e[0];return e}function Je(e,t){return Ke(t[e.index])}function Xe(e,t){const n=t[e];return Ve(n)?n:n[0]}function et(e){return 128==(128&e[2])}function tt(e,t){return null==t?null:e[t]}function nt(e){e[18]=0}function rt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const st={lFrame:wt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ot(){return st.bindingsEnabled}function it(){return st.lFrame.lView}function at(){return st.lFrame.tView}function lt(){let e=ct();for(;null!==e&&64===e.type;)e=e.parent;return e}function ct(){return st.lFrame.currentTNode}function ut(e,t){const n=st.lFrame;n.currentTNode=e,n.isParent=t}function ht(){return st.lFrame.isParent}function pt(){return st.isInCheckNoChangesMode}function dt(e){st.isInCheckNoChangesMode=e}function ft(e,t){const n=st.lFrame;n.bindingIndex=n.bindingRootIndex=e,mt(t)}function mt(e){st.lFrame.currentDirectiveIndex=e}function gt(e){st.lFrame.currentQueryIndex=e}function yt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function _t(e,t,n){if(n&ae.SkipSelf){let r=t,s=e;for(;r=r.parent,!(null!==r||n&ae.Host||(r=yt(s),null===r)||(s=s[15],10&r.type)););if(null===r)return!1;t=r,e=s}const r=st.lFrame=vt();return r.currentTNode=t,r.lView=e,!0}function bt(e){const t=vt(),n=e[1];st.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function vt(){const e=st.lFrame,t=null===e?null:e.child;return null===t?wt(e):t}function wt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function xt(){const e=st.lFrame;return st.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const kt=xt;function Tt(){const e=xt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ct(e){st.lFrame.selectedIndex=e}function Et(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:s,ngAfterViewInit:o,ngAfterViewChecked:i,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),s&&((e.contentHooks||(e.contentHooks=[])).push(n,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,s)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),i&&((e.viewHooks||(e.viewHooks=[])).push(n,i),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function St(e,t,n){Ot(e,t,3,n)}function At(e,t,n,r){(3&e[2])===n&&Ot(e,t,n,r)}function It(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ot(e,t,n,r){const s=null!=r?r:-1,o=t.length-1;let i=0;for(let a=void 0!==r?65535&e[18]:0;a<o;a++)if("number"==typeof t[a+1]){if(i=t[a],null!=r&&i>=r)break}else t[a]<0&&(e[18]+=65536),(i<s||-1==s)&&(Dt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Dt(e,t,n,r){const s=n[r]<0,o=n[r+1],i=e[s?-n[r]:n[r]];if(s){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(i)}finally{}}}else try{o.call(i)}finally{}}const Rt=-1;class Mt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function jt(e,t,n){const r=Qe(e);let s=0;for(;s<n.length;){const o=n[s];if("number"==typeof o){if(0!==o)break;s++;const i=n[s++],a=n[s++],l=n[s++];r?e.setAttribute(t,a,l,i):t.setAttributeNS(i,a,l)}else{const i=o,a=n[++s];64===i.charCodeAt(0)?r&&e.setProperty(t,i,a):r?e.setAttribute(t,i,a):t.setAttribute(i,a),s++}}return s}function Pt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||Nt(e,n,s,null,-1===n||2===n?t[++r]:null)}}return e}function Nt(e,t,n,r,s){let o=0,i=e.length;if(-1===t)i=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){i=-1;break}if(n>t){i=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==s&&(e[o+1]=s));if(r===e[o+1])return void(e[o+2]=s)}o++,null!==r&&o++,null!==s&&o++}-1!==i&&(e.splice(i,0,t),o=i+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==s&&e.splice(o++,0,s)}function Ht(e){return 32767&e}function Ft(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Vt=!0;function Lt(e){const t=Vt;return Vt=e,t}let Zt=0;function Bt(e,t){const n=$t(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,zt(r.data,e),zt(t,null),zt(r.blueprint,null));const s=Ut(e,t),o=e.injectorIndex;if(s!==Rt){const e=Ht(s),n=Ft(s,t),r=n[1].data;for(let s=0;s<8;s++)t[o+s]=n[e+s]|r[e+s]}return t[o+8]=s,o}function zt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function $t(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ut(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){const e=s[1],t=e.type;if(r=2===t?e.declTNode:1===t?s[6]:null,null===r)return Rt;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Rt}function Wt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Se)&&(r=n[Se]),null==r&&(r=n[Se]=Zt++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function qt(e,t,n){if(n&ae.Optional)return e;K(t,"NodeInjector")}function Gt(e,t,n,r){if(n&ae.Optional&&void 0===r&&(r=null),0==(n&(ae.Self|ae.Host))){const s=e[9],o=ce(void 0);try{return s?s.get(t,r,n&ae.Optional):ue(t,r,n&ae.Optional)}finally{ce(o)}}return qt(r,t,n)}const Qt={};function Yt(){return new tn(lt(),it())}function Kt(e,t,n,r,s,o){const i=t[1],a=i.data[e+8],l=function(e,t,n,r,s){const o=e.providerIndexes,i=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,u=s?a+c:e.directiveEnd;for(let h=r?a:a+c;h<u;h++){const e=i[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(s){const e=i[l];if(e&&Be(e)&&e.type===n)return l}return null}(a,i,n,null==r?function(e){return 2==(2&e.flags)}(a)&&Vt:r!=i&&0!=(3&a.type),s&ae.Host&&o===a);return null!==l?Jt(t,i,l,a):Qt}function Jt(e,t,n,r){let s=e[n];const o=t.data;if(s instanceof Mt){const i=s;i.resolving&&function(e,t){throw new Q("200",`Circular dependency in DI detected for ${e}`)}(Y(o[n]));const a=Lt(i.canSeeViewProviders);i.resolving=!0;const l=i.injectImpl?ce(i.injectImpl):null;_t(e,r,ae.Default);try{s=e[n]=i.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:o}=t.type.prototype;if(r){const r=((i=t).type.prototype.ngOnChanges&&(i.setInput=We),Ue);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}var i;s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,s),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&ce(l),Lt(a),i.resolving=!1,kt()}}return s}function Xt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function en(e,t){return!(e&ae.Self||e&ae.Host&&t)}class tn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return function(e,t,n,r=ae.Default,s){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Se)?e[Se]:void 0;return"number"==typeof t?t>=0?255&t:Yt:t}(n);if("function"==typeof o){if(!_t(t,e,r))return r&ae.Host?qt(s,n,r):Gt(t,n,r,s);try{const e=o(r);if(null!=e||r&ae.Optional)return e;K(n)}finally{kt()}}else if("number"==typeof o){let s=null,i=$t(e,t),a=Rt,l=r&ae.Host?t[16][6]:null;for((-1===i||r&ae.SkipSelf)&&(a=-1===i?Ut(e,t):t[i+8],a!==Rt&&en(r,!1)?(s=t[1],i=Ht(a),t=Ft(a,t)):i=-1);-1!==i;){const e=t[1];if(Xt(o,i,e.data)){const e=Kt(i,t,n,s,r,l);if(e!==Qt)return e}a=t[i+8],a!==Rt&&en(r,t[1].data[i+8]===l)&&Xt(o,i,t)?(s=e,i=Ht(a),t=Ft(a,t)):i=-1}}}return Gt(t,n,r,s)}(this._tNode,this._lView,e,void 0,t)}}const nn="__parameters__";function rn(e,t,n){return he(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function s(...e){if(this instanceof s)return r.apply(this,e),this;const t=new s(...e);return n.annotation=t,n;function n(e,n,r){const s=e.hasOwnProperty(nn)?e[nn]:Object.defineProperty(e,nn,{value:[]})[nn];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(t),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}class sn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=J({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function on(e,t){e.forEach(e=>Array.isArray(e)?on(e,t):t(e))}function an(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const ln={},cn=/\n/gm,un="__source",hn=z({provide:String,useValue:z});let pn;function dn(e){const t=pn;return pn=e,t}function fn(e,t=ae.Default){if(void 0===pn)throw new Error("inject() must be called from an injection context");return null===pn?ue(e,void 0,t):pn.get(e,t&ae.Optional?null:void 0,t)}function mn(e,t=ae.Default){return(le||fn)(G(e),t)}function gn(e){const t=[];for(let n=0;n<e.length;n++){const r=G(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=ae.Default;for(let t=0;t<r.length;t++){const s=r[t],o=s.__NG_DI_FLAG__;"number"==typeof o?-1===o?e=s.token:n|=o:e=s}t.push(mn(e,n))}else t.push(mn(r))}return t}function yn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const _n=yn(rn("Inject",e=>({token:e})),-1),bn=yn(rn("Optional"),8),vn=yn(rn("SkipSelf"),4);function wn(e,t){e.__ngContext__=t}function xn(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function kn(e){return e.ngDebugContext}function Tn(e){return e.ngOriginalError}function Cn(e,...t){e.error(...t)}class En{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Cn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?kn(e)?kn(e):this._findContext(Tn(e)):null}_findOriginalError(e){let t=Tn(e);for(;t&&Tn(t);)t=Tn(t);return t}}const Sn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_e))();function An(e){return e instanceof Function?e():e}var In=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function On(e,t){return(void 0)(e,t)}function Dn(e){const t=e[3];return Le(t)?t[3]:t}function Rn(e){return jn(e[13])}function Mn(e){return jn(e[4])}function jn(e){for(;null!==e&&!Le(e);)e=e[4];return e}function Pn(e,t,n,r,s){if(null!=r){let o,i=!1;Le(r)?o=r:Ve(r)&&(i=!0,r=r[0]);const a=Ke(r);0===e&&null!==n?null==s?Ln(t,n,a):Vn(t,n,a,s||null,!0):1===e&&null!==n?Vn(t,n,a,s||null,!0):2===e?function(e,t,n){const r=function(e,t){return Qe(e)?e.parentNode(t):t.parentNode}(e,t);r&&function(e,t,n,r){Qe(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,i):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,r,s){const o=n[7];o!==Ke(n)&&Pn(t,e,r,o,s);for(let i=Fe;i<n.length;i++){const s=n[i];Un(s[1],s,e,t,r,o)}}(t,e,o,n,s)}}function Nn(e,t,n){return Qe(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Hn(e,t){const n=e[9],r=n.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,rt(s,-1)),n.splice(r,1)}function Fn(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Mt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],s=t[n+1];try{s.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let s=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const e=n[o+1],i="function"==typeof e?e(t):Ke(t[e]),a=r[s=n[o+2]],l=n[o+3];"boolean"==typeof l?i.removeEventListener(n[o],a,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),o+=2}else{const e=r[s=n[o+1]];n[o].call(e)}if(null!==r){for(let e=s+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Qe(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Le(t[3])){n!==t[3]&&Hn(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Vn(e,t,n,r,s){Qe(e)?e.insertBefore(t,n,r,s):t.insertBefore(n,r,s)}function Ln(e,t,n){Qe(e)?e.appendChild(t,n):t.appendChild(n)}function Zn(e,t,n,r,s){null!==r?Vn(e,t,n,r,s):Ln(e,t,n)}function Bn(e,t,n,r){const s=function(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===de.None||t===de.Emulated)return null}return Je(r,n)}(e,t.parent,n)}(e,r,t),o=t[11],i=function(e,t,n){return function(e,t,n){return 40&e.type?Je(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=s)if(Array.isArray(n))for(let a=0;a<n.length;a++)Zn(o,s,n[a],i,!1);else Zn(o,s,n,i,!1)}function zn(e,t){return null!==t?e[16][6].projection[t.projection]:null}function $n(e,t,n,r,s,o,i){for(;null!=n;){const a=r[n.index],l=n.type;if(i&&0===t&&(a&&wn(Ke(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)$n(e,t,n.child,r,s,o,!1),Pn(t,e,s,a,o);else if(32&l){const i=On(n,r);let l;for(;l=i();)Pn(t,e,s,l,o);Pn(t,e,s,a,o)}else 16&l?Wn(e,t,r,n,s,o):Pn(t,e,s,a,o);n=i?n.projectionNext:n.next}}function Un(e,t,n,r,s,o){$n(n,r,e.firstChild,t,s,o,!1)}function Wn(e,t,n,r,s,o){const i=n[16],a=i[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Pn(t,e,s,a[l],o);else $n(e,t,a,i[3],s,o,!0)}function qn(e,t,n){Qe(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Gn(e,t,n){Qe(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Qn(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const n=t.length;if(s+n===r||e.charCodeAt(s+n)<=32)return s}n=s+1}}const Yn="ng-template";function Kn(e,t,n){let r=0;for(;r<e.length;){let s=e[r++];if(n&&"class"===s){if(s=e[r],-1!==Qn(s.toLowerCase(),t,0))return!0}else if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function Jn(e){return 4===e.type&&e.value!==Yn}function Xn(e,t,n){return t===(4!==e.type||n?e.value:Yn)}function er(e,t,n){let r=4;const s=e.attrs||[],o=function(e){for(let n=0;n<e.length;n++)if(3===(t=e[n])||4===t||6===t)return n;var t;return e.length}(s);let i=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!i)if(4&r){if(r=2|1&r,""!==l&&!Xn(e,l,n)||""===l&&1===t.length){if(tr(r))return!1;i=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!Kn(e.attrs,c,n)){if(tr(r))return!1;i=!0}continue}const u=nr(8&r?"class":l,s,Jn(e),n);if(-1===u){if(tr(r))return!1;i=!0;continue}if(""!==c){let e;e=u>o?"":s[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==Qn(t,c,0)||2&r&&c!==e){if(tr(r))return!1;i=!0}}}}else{if(!i&&!tr(r)&&!tr(l))return!1;if(i&&tr(l))continue;i=!1,r=l|1&r}}return tr(r)||i}function tr(e){return 0==(1&e)}function nr(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let n=!1;for(;s<t.length;){const r=t[s];if(r===e)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++s];for(;"string"==typeof e;)e=t[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function rr(e,t,n=!1){for(let r=0;r<t.length;r++)if(er(e,t[r],n))return!0;return!1}function sr(e,t){return e?":not("+t.trim()+")":t}function or(e){let t=e[0],n=1,r=2,s="",o=!1;for(;n<e.length;){let i=e[n];if("string"==typeof i)if(2&r){const t=e[++n];s+="["+i+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?s+="."+i:4&r&&(s+=" "+i);else""===s||tr(i)||(t+=sr(o,s),s=""),r=i,o=o||!tr(r);n++}return""!==s&&(t+=sr(o,s)),t}const ir={};function ar(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],o=n[r+1];if(-1!==o){const n=e.data[o];gt(s),n.contentQueries(2,t[o],o)}}}function lr(e,t,n,r,s,o,i,a,l,c){const u=t.blueprint.slice();return u[0]=s,u[2]=140|r,nt(u),u[3]=u[15]=e,u[8]=n,u[10]=i||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=o,u[16]=2==t.type?e[16]:u,u}function cr(e,t,n,r,s){let o=e.data[t];if(null===o)o=function(e,t,n,r,s){const o=ct(),i=ht(),a=e.data[t]=function(e,t,n,r,s,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,i?o:o&&o.parent,n,t,r,s);return null===e.firstChild&&(e.firstChild=a),null!==o&&(i?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(e,t,n,r,s),st.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=s;const e=function(){const e=st.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===e?-1:e.injectorIndex}return ut(o,!0),o}function ur(e,t,n,r){if(0===n)return-1;const s=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function hr(e,t,n){bt(t);try{const r=e.viewQuery;null!==r&&Mr(1,r,n);const s=e.template;null!==s&&fr(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ar(e,t),e.staticViewQueries&&Mr(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)Ir(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Tt()}}function pr(e,t,n,r){const s=t[2];if(256==(256&s))return;bt(t);const o=pt();try{nt(t),st.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&fr(e,t,n,2,r);const i=3==(3&s);if(!o)if(i){const n=e.preOrderCheckHooks;null!==n&&St(t,n,null)}else{const n=e.preOrderHooks;null!==n&&At(t,n,0,null),It(t,0)}if(function(e){for(let t=Rn(e);null!==t;t=Mn(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&rt(r,1),n[2]|=1024}}}(t),function(e){for(let t=Rn(e);null!==t;t=Mn(t))for(let e=Fe;e<t.length;e++){const n=t[e],r=n[1];et(n)&&pr(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&ar(e,t),!o)if(i){const n=e.contentCheckHooks;null!==n&&St(t,n)}else{const n=e.contentHooks;null!==n&&At(t,n,1),It(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)Ct(~r);else{const s=r,o=n[++e],i=n[++e];ft(o,s),i(2,t[s])}}}finally{Ct(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Sr(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Mr(2,l,r),!o)if(i){const n=e.viewCheckHooks;null!==n&&St(t,n)}else{const n=e.viewHooks;null!==n&&At(t,n,2),It(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,rt(t[3],-1))}finally{Tt()}}function dr(e,t,n,r){const s=t[10],o=!pt(),i=4==(4&t[2]);try{o&&!i&&s.begin&&s.begin(),i&&hr(e,t,r),pr(e,t,n,r)}finally{o&&!i&&s.end&&s.end()}}function fr(e,t,n,r,s){const o=st.lFrame.selectedIndex,i=2&r;try{Ct(-1),i&&t.length>He&&function(e,t,n,r){if(!r)if(3==(3&t[2])){const n=e.preOrderCheckHooks;null!==n&&St(t,n,20)}else{const n=e.preOrderHooks;null!==n&&At(t,n,0,20)}Ct(20)}(e,t,0,pt()),n(r,s)}finally{Ct(o)}}function mr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=gr(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function gr(e,t,n,r,s,o,i,a,l,c){const u=He+r,h=u+s,p=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ir);return n}(u,h),d="function"==typeof c?c():c;return p[1]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof i?i():i,firstChild:null,schemas:l,consts:d,incompleteFirstPass:!1}}function yr(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,s):n[r]=[t,s]}return n}function _r(e,t,n,r,s,o){const i=o.hostBindings;if(i){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const o=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,s,i)}}function br(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function vr(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function wr(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Be(t)&&(n[""]=e)}}function xr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function kr(e,t,n,r,s){e.data[r]=s;const o=s.factory||(s.factory=ze(s.type)),i=new Mt(o,Be(s),null);e.blueprint[r]=i,n[r]=i,_r(e,t,0,r,ur(e,n,s.hostVars,ir),s)}function Tr(e,t,n){const r=Je(t,e),s=mr(n),o=e[10],i=Or(e,lr(e,s,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=i}function Cr(e,t,n,r,s,o){const i=o[t];if(null!==i){const e=r.setInput;for(let t=0;t<i.length;){const s=i[t++],o=i[t++],a=i[t++];null!==e?r.setInput(n,a,s,o):n[o]=a}}}function Er(e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,e[s],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Sr(e,t){const n=Xe(t,e);if(et(n)){const e=n[1];80&n[2]?pr(e,n,e.template,n[8]):n[5]>0&&Ar(n)}}function Ar(e){for(let n=Rn(e);null!==n;n=Mn(n))for(let e=Fe;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];pr(e,t,e.template,t[8])}else t[5]>0&&Ar(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Xe(t[n],e);et(r)&&r[5]>0&&Ar(r)}}function Ir(e,t){const n=Xe(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),hr(r,n,n[8])}function Or(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Dr(e,t,n){const r=t[10];r.begin&&r.begin();try{pr(e,t,e.template,n)}catch(s){throw function(e,t){const n=e[9],r=n?n.get(En,null):null;r&&r.handleError(t)}(t,s),s}finally{r.end&&r.end()}}function Rr(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=xn(n),s=r[1];dr(s,r,s.template,n)}}(e[8])}function Mr(e,t,n){gt(0),t(e,n)}const jr=(()=>Promise.resolve(null))();function Pr(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,o=0;if(null!==t)for(let i=0;i<t.length;i++){const e=t[i];"number"==typeof e?o=e:1==o?s=U(s,e):2==o&&(r=U(r,e+": "+t[++i]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}const Nr=new sn("INJECTOR",-1);class Hr{get(e,t=ln){if(t===ln){const t=new Error(`NullInjectorError: No provider for ${$(e)}!`);throw t.name="NullInjectorError",t}return t}}const Fr=new sn("Set Injector scope."),Vr={},Lr={};let Zr;function Br(){return void 0===Zr&&(Zr=new Hr),Zr}function zr(e,t=null,n=null,r){return new $r(e,n,t||Br(),r)}class $r{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&on(t,n=>this.processProvider(n,e,t)),on([e],e=>this.processInjectorType(e,[],s)),this.records.set(Nr,Wr(void 0,this));const o=this.records.get(Fr);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:$(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=ln,n=ae.Default){this.assertNotDestroyed();const r=dn(this);try{if(!(n&ae.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof sn)&&ee(e);t=n&&this.injectableDefInScope(n)?Wr(Ur(e),Vr):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&ae.Self?Br():this.parent).get(e,t=n&ae.Optional&&t===ln?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift($(e)),r)throw o;return function(e,t,n,r){const s=e.ngTempTokenPath;throw t[un]&&s.unshift(t[un]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let s=$(t);if(Array.isArray(t))s=t.map($).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):$(r)))}s=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(cn,"\n  ")}`}("\n"+e.message,s,n,r),e.ngTokenPath=s,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{dn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push($(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=G(e)))return!1;let r=ne(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,i=-1!==n.indexOf(o);if(void 0!==s&&(r=ne(s)),null==r)return!1;if(null!=r.imports&&!i){let e;n.push(o);try{on(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];on(r,e=>this.processProvider(e,n,r||ve))}}this.injectorDefTypes.add(o);const a=ze(o)||(()=>new o);this.records.set(o,Wr(a,Vr));const l=r.providers;if(null!=l&&!i){const t=e;on(l,e=>this.processProvider(e,t,l))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,n){let r=Gr(e=G(e))?e:G(e&&e.provide);const s=function(e,t,n){return qr(e)?Wr(void 0,e.useValue):Wr(function(e,t,n){let r;if(Gr(e)){const t=G(e);return ze(t)||Ur(t)}if(qr(e))r=()=>G(e.useValue);else if((s=e)&&s.useFactory)r=()=>e.useFactory(...gn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>mn(G(e.useExisting));else{const t=G(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ze(t)||Ur(t);r=()=>new t(...gn(e.deps))}var s;return r}(e),Vr)}(e);if(Gr(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Wr(void 0,Vr,!0),t.factory=()=>gn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,s)}hydrate(e,t){var n;return t.value===Vr&&(t.value=Lr,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=G(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Ur(e){const t=ee(e),n=null!==t?t.factory:ze(e);if(null!==n)return n;if(e instanceof sn)throw new Error(`Token ${$(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${$(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[re]||e[oe]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Wr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function qr(e){return null!==e&&"object"==typeof e&&hn in e}function Gr(e){return"function"==typeof e}const Qr=function(e,t,n){return function(e,t=null,n=null,r){const s=zr(e,t,n,r);return s._resolveInjectorDefTypes(),s}({name:n},t,e,n)};let Yr=(()=>{class e{static create(e,t){return Array.isArray(e)?Qr(e,t,""):Qr(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=ln,e.NULL=new Hr,e.\u0275prov=J({token:e,providedIn:"any",factory:()=>mn(Nr)}),e.__NG_ELEMENT_ID__=-1,e})();function Kr(e,t){Et(xn(e)[1],lt())}let Jr=null;function Xr(){if(!Jr){const e=_e.Symbol;if(e&&e.iterator)Jr=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Jr=n)}}}return Jr}function es(e){return!!ts(e)&&(Array.isArray(e)||!(e instanceof Map)&&Xr()in e)}function ts(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ns(e,t,n,r,s){const o=s?"class":"style";!function(e,t,n,r,s){for(let o=0;o<n.length;){const i=n[o++],a=n[o++],l=t[i],c=e.data[i];null!==c.setInput?c.setInput(l,s,r,a):l[a]=s}}(e,n,t.inputs[o],o,r)}function rs(e,t,n,r){const s=it(),o=at(),i=He+e,a=s[11],l=s[i]=Nn(a,t,st.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,s,o,i){const a=t.consts,l=cr(t,e,2,s,tt(a,o));return function(e,t,n,r){let s=!1;if(ot()){const o=function(e,t,n){const r=e.directiveRegistry;let s=null;if(r)for(let o=0;o<r.length;o++){const i=r[o];rr(n,i.selectors,!1)&&(s||(s=[]),Wt(Bt(n,t),e,i.type),Be(i)?(vr(e,n),s.unshift(i)):s.push(i))}return s}(e,t,n),i=null===r?null:{"":-1};if(null!==o){s=!0,xr(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=ur(e,t,o.length,null);for(let s=0;s<o.length;s++){const c=o[s];n.mergedAttrs=Pt(n.mergedAttrs,c.hostAttrs),kr(e,n,t,l,c),wr(l,c,i),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,s=t.attrs,o=[];let i=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,c=null===s||Jn(t)?null:Er(n,s);o.push(c),i=yr(n,l,i),a=yr(e.outputs,l,a)}null!==i&&(i.hasOwnProperty("class")&&(t.flags|=16),i.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=i,t.outputs=a}(e,n)}i&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const s=n[t[e+1]];if(null==s)throw new Q("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],s)}}}(n,r,i)}n.mergedAttrs=Pt(n.mergedAttrs,n.attrs)}(t,n,l,tt(a,i)),null!==l.attrs&&Pr(l,l.attrs,!1),null!==l.mergedAttrs&&Pr(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(i,o,s,0,t,n,r):o.data[i];ut(c,!0);const u=c.mergedAttrs;null!==u&&jt(a,l,u);const h=c.classes;null!==h&&Gn(a,l,h);const p=c.styles;null!==p&&qn(a,l,p),64!=(64&c.flags)&&Bn(o,s,l,c),0===st.lFrame.elementDepthCount&&wn(l,s),st.lFrame.elementDepthCount++,function(e){return 1==(1&e.flags)}(c)&&(function(e,t,n){ot()&&(function(e,t,n,r){const s=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Bt(n,t),wn(r,t);const i=n.initialInputs;for(let a=s;a<o;a++){const r=e.data[a],o=Be(r);o&&Tr(t,n,r);const l=Jt(t,e,a,n);wn(l,t),null!==i&&Cr(0,a-s,l,r,0,i),o&&(Xe(n.index,t)[8]=l)}}(e,t,n,Je(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,s=n.directiveEnd,o=n.index,i=st.lFrame.currentDirectiveIndex;try{Ct(o);for(let n=r;n<s;n++){const r=e.data[n],s=t[n];mt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||br(r,s)}}finally{Ct(-1),mt(i)}}(e,t,n))}(o,s,c),function(e,t,n){if(Ze(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const t=e.data[s];t.contentQueries&&t.contentQueries(1,n[s],s)}}}(o,c,s)),null!==r&&function(e,t,n=Je){const r=t.localNames;if(null!==r){let s=t.index+1;for(let o=0;o<r.length;o+=2){const i=r[o+1],a=-1===i?n(t,e):e[i];e[s++]=a}}}(s,c)}function ss(){let e=lt();ht()?st.lFrame.isParent=!1:(e=e.parent,ut(e,!1));const t=e;st.lFrame.elementDepthCount--;const n=at();n.firstCreatePass&&(Et(n,e),Ze(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&ns(n,t,it(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&ns(n,t,it(),t.stylesWithoutHost,!1)}function os(e,t,n,r){rs(e,t,n,r),ss()}function is(e){return!!e&&"function"==typeof e.then}function as(e,t=""){const n=it(),r=at(),s=e+He,o=r.firstCreatePass?cr(r,s,1,t,null):r.data[s],i=n[s]=function(e,t){return Qe(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Bn(r,n,i,o),ut(o,!1)}const ls=void 0;var cs=["en",[["a","p"],["AM","PM"],ls],[["AM","PM"],ls,ls],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ls,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ls,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ls,"{1} 'at' {0}",ls],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let us={};function hs(e){return e in us||(us[e]=_e.ng&&_e.ng.common&&_e.ng.common.locales&&_e.ng.common.locales[e]),us[e]}var ps=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const ds="en-US";let fs=ds;function ms(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(fs=e.toLowerCase().replace(/_/g,"-"))}class gs{}class ys{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${$(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let _s=(()=>{class e{}return e.NULL=new ys,e})();function bs(...e){}function vs(e,t){return new xs(Je(e,t))}const ws=function(){return vs(lt(),it())};let xs=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=ws,e})();class ks{}let Ts=(()=>{class e{}return e.\u0275prov=J({token:e,providedIn:"root",factory:()=>null}),e})();class Cs{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Es=new Cs("12.0.0");class Ss{constructor(){}supports(e){return es(e)}create(e){return new Is(e)}}const As=(e,t)=>t;class Is{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||As}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<Ms(n,r,s)?t:n,i=Ms(o,r,s),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const e=i-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<s.length?s[n]:s[n]=0,o=r+n;t<=o&&o<e&&(s[n]=r+1)}s[o.previousIndex]=t-e}}i!==a&&e(o,i,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!es(e))throw new Error(`Error trying to diff '${$(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,s=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==s&&Object.is(s.trackById,r)?(o&&(s=this._verifyReinsertion(s,n,r,t)),Object.is(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,t),o=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Xr()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==s&&Object.is(s.trackById,r)?(o&&(s=this._verifyReinsertion(s,e,r,t)),Object.is(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,r,t),o=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Os(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Rs),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Os{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ds{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Rs{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Ds,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ms(e,t,n){const r=e.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+t+s}class js{constructor(){}supports(e){return e instanceof Map||ts(e)}create(){return new Ps}}class Ps{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ts(e)))throw new Error(`Error trying to diff '${$(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new Ns(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Ns{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hs(){return new Fs([new Ss])}let Fs=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Hs()),deps:[[e,new vn,new bn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=J({token:e,providedIn:"root",factory:Hs}),e})();function Vs(){return new Ls([new js])}let Ls=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Vs()),deps:[[e,new vn,new bn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=J({token:e,providedIn:"root",factory:Vs}),e})();function Zs(e,t,n,r,s=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Ke(o)),Le(o))for(let e=Fe;e<o.length;e++){const t=o[e],n=t[1].firstChild;null!==n&&Zs(t[1],t,n,r)}const i=n.type;if(8&i)Zs(e,t,n.child,r);else if(32&i){const e=On(n,t);let s;for(;s=e();)r.push(s)}else if(16&i){const e=zn(t,n);if(Array.isArray(e))r.push(...e);else{const n=Dn(t[16]);Zs(n[1],n,e,r,!0)}}n=s?n.projectionNext:n.next}return r}class Bs extends class{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Zs(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Le(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(function(e,t){if(e.length<=Fe)return;const n=Fe+t,r=e[n];if(r){const o=r[17];null!==o&&o!==e&&Hn(o,r),t>0&&(e[n-1][4]=r[4]);const i=an(e,Fe+t);Un(r[1],s=r,s[11],2,null,null),s[0]=null,s[6]=null;const a=i[19];null!==a&&a.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}var s}(e,n),an(t,n))}this._attachedToViewContainer=!1}!function(e,t){if(!(256&t[2])){const n=t[11];Qe(n)&&n.destroyNode&&Un(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Fn(e[1],e);for(;t;){let n=null;if(Ve(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)Ve(t)&&Fn(t[1],t),t=t[3];null===t&&(t=e),Ve(t)&&Fn(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}onDestroy(e){!function(e,t,n,r){const s=(o=t)[7]||(o[7]=[]);var o;s.push(r)}(0,this._lView,0,e)}markForCheck(){!function(e){for(;e;){e[2]|=64;const t=Dn(e);if(0!=(512&e[2])&&!t)return e;e=t}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Dr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){dt(!0);try{Dr(e,t,n)}finally{dt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Un(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}{constructor(e){super(e),this._view=e}detectChanges(){Rr(this._view)}checkNoChanges(){!function(e){dt(!0);try{Rr(e)}finally{dt(!1)}}(this._view)}get context(){return null}}const zs=[new js],$s=new Fs([new Ss]),Us=new Ls(zs);class Ws{}const qs={};class Gs extends _s{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Pe(e);return new Ks(t,this.ngModule)}}function Qs(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Ys=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sn});class Ks extends gs{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(or).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Qs(this.componentDef.inputs)}get outputs(){return Qs(this.componentDef.outputs)}create(e,t,n,r){const s=(r=r||this.ngModule)?function(e,t){return{get:(n,r,s)=>{const o=e.get(n,qs,s);return o!==qs||r===qs?o:t.get(n,r,s)}}}(e,r.injector):e,o=s.get(ks,Ye),i=s.get(Ts,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Qe(e))return e.selectRootElement(t,n===de.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Nn(o.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Sn,clean:jr,playerHandler:null,flags:0},p=gr(0,null,null,1,0,null,null,null,null,null),d=lr(null,p,h,u,null,null,o,a,i,s);let f,m;bt(d);try{const e=function(e,t,n,r,s,o){const i=n[1];n[20]=e;const a=cr(i,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(Pr(a,l,!0),null!==e&&(jt(s,e,l),null!==a.classes&&Gn(s,e,a.classes),null!==a.styles&&qn(s,e,a.styles)));const c=r.createRenderer(e,t),u=lr(n,mr(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return i.firstCreatePass&&(Wt(Bt(a,n),i,t.type),vr(i,a),xr(a,n.length,1)),Or(n,u),n[20]=u}(c,this.componentDef,d,o,a);if(c)if(n)jt(a,c,["ng-version",Es.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===s?""!==o&&t.push(o,e[++r]):8===s&&n.push(o);else{if(!tr(s))break;s=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&jt(a,c,e),t&&t.length>0&&Gn(a,c,t.join(" "))}if(m=p.data[20],void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,s){const o=n[1],i=function(e,t,n){const r=lt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),kr(e,r,t,ur(e,t,1,null),n));const s=Jt(t,e,r.directiveStart,r);wn(s,t);const o=Je(r,t);return o&&wn(o,t),s}(o,n,t);if(r.components.push(i),e[8]=i,s&&s.forEach(e=>e(i,t)),t.contentQueries){const e=lt();t.contentQueries(1,i,e.directiveStart)}const a=lt();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Ct(a.index),_r(n[1],a,0,a.directiveStart,a.directiveEnd,t),br(t,i)),i}(e,this.componentDef,d,h,[Kr]),hr(p,d,null)}finally{Tt()}return new Js(this.componentType,f,vs(m,d),d,m)}}class Js extends class{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Bs(r),this.componentType=e}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Xs=new Map;class eo extends Ws{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gs(this);const n=Ne(e),r=e[Ce]||null;r&&ms(r),this._bootstrapComponents=An(n.bootstrap),this._r3Injector=zr(e,t,[{provide:Ws,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],$(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Yr.THROW_IF_NOT_FOUND,n=ae.Default){return e===Yr||e===Ws||e===Nr?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class to extends class{}{constructor(e){super(),this.moduleType=e,null!==Ne(e)&&function(e){const t=new Set;!function e(n){const r=Ne(n,!0),s=r.id;null!==s&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${$(t)} vs ${$(t.name)}`)}(s,Xs.get(s),n),Xs.set(s,n));const o=An(r.imports);for(const i of o)t.has(i)||(t.add(i),e(i))}(e)}(e)}create(e){return new eo(this.moduleType,e)}}function no(e){return t=>{setTimeout(e,void 0,t)}}const ro=class extends k{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let i=e,a=t||(()=>null),l=n;if(e&&"object"==typeof e){const t=e;i=null===(r=t.next)||void 0===r?void 0:r.bind(t),a=null===(s=t.error)||void 0===s?void 0:s.bind(t),l=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(a=no(a),i&&(i=no(i)),l&&(l=no(l)));const c=super.subscribe({next:i,error:a,complete:l});return e instanceof h&&e.add(c),c}},so=new sn("Application Initializer");let oo=(()=>{class e{constructor(e){this.appInits=e,this.resolve=bs,this.reject=bs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const t=this.appInits[r]();if(is(t))e.push(t);else if((n=t)&&"function"==typeof n.subscribe){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}var n;Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(mn(so,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();const io=new sn("AppId"),ao={provide:io,useFactory:function(){return`${lo()}${lo()}${lo()}`},deps:[]};function lo(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const co=new sn("Platform Initializer"),uo=new sn("Platform ID"),ho=new sn("appBootstrapListener");let po=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();const fo=new sn("LocaleId"),mo=new sn("DefaultCurrencyCode");class go{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const yo=function(e){return new to(e)},_o=yo,bo=function(e){return Promise.resolve(yo(e))},vo=function(e){const t=yo(e),n=An(Ne(e).declarations).reduce((e,t)=>{const n=Pe(t);return n&&e.push(new Ks(n)),e},[]);return new go(t,n)},wo=vo,xo=function(e){return Promise.resolve(vo(e))};let ko=(()=>{class e{constructor(){this.compileModuleSync=_o,this.compileModuleAsync=bo,this.compileModuleAndAllComponentsSync=wo,this.compileModuleAndAllComponentsAsync=xo}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();const To=(()=>Promise.resolve(0))();function Co(e){"undefined"==typeof Zone?To.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Eo{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ro(!1),this.onMicrotaskEmpty=new ro(!1),this.onStable=new ro(!1),this.onError=new ro(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=_e.requestAnimationFrame,t=_e.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(_e,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Io(e),e.isCheckStableRunning=!0,Ao(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Io(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,o,i,a)=>{try{return Oo(e),n.invokeTask(s,o,i,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Do(e)}},onInvoke:(n,r,s,o,i,a,l)=>{try{return Oo(e),n.invoke(s,o,i,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Do(e)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Io(e),Ao(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Eo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Eo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,So,bs,bs);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const So={};function Ao(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Io(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Oo(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Do(e){e._nesting--,Ao(e)}class Ro{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ro,this.onMicrotaskEmpty=new ro,this.onStable=new ro,this.onError=new ro}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Mo=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Eo.assertNotInAngularZone(),Co(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Co(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(mn(Eo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})(),jo=(()=>{class e{constructor(){this._applications=new Map,Ho.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Ho.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();class Po{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let No,Ho=new Po,Fo=!0,Vo=!1;const Lo=new sn("AllowMultipleToken");function Zo(e,t,n=[]){const r=`Platform: ${t}`,s=new sn(r);return(t=[])=>{let o=Bo();if(!o||o.injector.get(Lo,!1))if(e)e(n.concat(t).concat({provide:s,useValue:!0}));else{const e=n.concat(t).concat({provide:s,useValue:!0},{provide:Fr,useValue:"platform"});!function(e){if(No&&!No.destroyed&&!No.injector.get(Lo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");No=e.get(zo);const t=e.get(co,null);t&&t.forEach(e=>e())}(Yr.create({providers:e,name:r}))}return function(e){const t=Bo();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function Bo(){return No&&!No.destroyed?No:null}let zo=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Ro:("zone.js"===e?void 0:e)||new Eo({enableLongStackTrace:(Vo=!0,Fo),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Eo,useValue:n}];return n.run(()=>{const t=Yr.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(t),o=s.injector.get(En,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});s.onDestroy(()=>{Wo(this._modules,s),e.unsubscribe()})}),function(e,t,n){try{const r=n();return is(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=s.injector.get(oo);return e.runInitializers(),e.donePromise.then(()=>(ms(s.injector.get(fo,ds)||ds),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=$o({},t);return function(e,t,n){const r=new to(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Uo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${$(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(mn(Yr))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();function $o(e,t){return Array.isArray(t)?t.reduce($o,e):Object.assign(Object.assign({},e),t)}let Uo=(()=>{class e{constructor(e,t,n,r,s){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),i=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Eo.assertNotInAngularZone(),Co(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Eo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];var s;return(s=r)&&"function"==typeof s.schedule?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:function(e=Number.POSITIVE_INFINITY){return M(y,e)}(t)(function(e,t){return t?function(e,t){return new _(n=>{const r=new h;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}(e,t):new _(S(e))}(e,n))}(o,i.pipe(e=>{return N()((t=B,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,L);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof gs?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ws),s=n.create(Yr.NULL,[],t||n.selector,r),o=s.location.nativeElement,i=s.injector.get(Mo,null),a=i&&s.injector.get(jo);return i&&a&&a.registerApplication(o,i),s.onDestroy(()=>{this.detachView(s.hostView),Wo(this.components,s),a&&a.unregisterApplication(o)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Wo(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ho,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(mn(Eo),mn(Yr),mn(En),mn(_s),mn(oo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();function Wo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const qo=Zo(null,"core",[{provide:uo,useValue:"unknown"},{provide:zo,deps:[Yr]},{provide:jo,deps:[]},{provide:po,deps:[]}]),Go=[{provide:Uo,useClass:Uo,deps:[Eo,Yr,En,_s,oo]},{provide:Ys,deps:[Eo],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:oo,useClass:oo,deps:[[new bn,so]]},{provide:ko,useClass:ko,deps:[]},ao,{provide:Fs,useFactory:function(){return $s},deps:[]},{provide:Ls,useFactory:function(){return Us},deps:[]},{provide:fo,useFactory:function(e){return ms(e=e||"undefined"!=typeof $localize&&$localize.locale||ds),e},deps:[[new _n(fo),new bn,new vn]]},{provide:mo,useValue:"USD"}];let Qo=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(mn(Uo))},e.\u0275mod=Me({type:e}),e.\u0275inj=X({providers:Go}),e})(),Yo=null;function Ko(){return Yo}const Jo=new sn("DocumentToken");var Xo=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});class ei{}let ti=(()=>{class e extends ei{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=hs(t);if(n)return n;const r=t.split("-")[0];if(n=hs(r),n)return n;if("en"===r)return cs;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[ps.PluralCase]}(t||this.locale)(e)){case Xo.Zero:return"zero";case Xo.One:return"one";case Xo.Two:return"two";case Xo.Few:return"few";case Xo.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(mn(fo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})(),ni=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Me({type:e}),e.\u0275inj=X({providers:[{provide:ei,useClass:ti}]}),e})();class ri extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new ri,Yo||(Yo=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(oi=oi||document.querySelector("base"),oi?oi.getAttribute("href"):null);return null==t?null:function(e){si=si||document.createElement("a"),si.setAttribute("href",e);const t=si.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){oi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,s]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,e)}}let si,oi=null;const ii=new sn("TRANSITION_ID"),ai=[{provide:so,useFactory:function(e,t,n){return()=>{n.get(oo).donePromise.then(()=>{const n=Ko();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[ii,Jo,Yr],multi:!0}];class li{static init(){var e;e=new li,Ho=e}addToWindow(e){_e.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},_e.getAllAngularTestabilities=()=>e.getAllTestabilities(),_e.getAllAngularRootElements=()=>e.getAllRootElements(),_e.frameworkStabilizers||(_e.frameworkStabilizers=[]),_e.frameworkStabilizers.push(e=>{const t=_e.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Ko().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ci=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();const ui=new sn("EventManagerPlugins");let hi=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(mn(ui),mn(Eo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();class pi{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Ko().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let di=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})(),fi=(()=>{class e extends di{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(mi),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(mi))}}return e.\u0275fac=function(t){return new(t||e)(mn(Jo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();function mi(e){Ko().remove(e)}const gi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},yi=/%COMP%/g;function _i(e,t,n){for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?_i(e,s,n):(s=s.replace(yi,e),n.push(s))}return n}function bi(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let vi=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new wi(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case de.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new xi(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case de.ShadowDom:return new ki(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=_i(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(mn(hi),mn(fi),mn(io))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();class wi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(gi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=gi[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=gi[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(In.DashCase|In.Important)?e.style.setProperty(t,n,r&In.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&In.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bi(n)):this.eventManager.addEventListener(e,t,bi(n))}}class xi extends wi{constructor(e,t,n,r){super(e),this.component=n;const s=_i(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(yi,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(yi,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class ki extends wi{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=_i(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const e=document.createElement("style");e.textContent=s[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ti=(()=>{class e extends pi{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(mn(Jo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();const Ci=["alt","control","meta","shift"],Ei={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Si={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ai={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Ii=(()=>{class e extends pi{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ko().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(n.pop());let o="";if(Ci.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=s,0!=n.length||0===s.length)return null;const i={};return i.domEventName=r,i.fullKey=o,i}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Si.hasOwnProperty(t)&&(t=Si[t]))}return Ei[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Ci.forEach(r=>{r!=n&&(0,Ai[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return s=>{e.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(mn(Jo))},e.\u0275prov=J({token:e,factory:e.\u0275fac}),e})();const Oi=Zo(qo,"browser",[{provide:uo,useValue:"browser"},{provide:co,useValue:function(){ri.makeCurrent(),li.init()},multi:!0},{provide:Jo,useFactory:function(){return function(e){Ge=e}(document),document},deps:[]}]),Di=[[],{provide:Fr,useValue:"root"},{provide:En,useFactory:function(){return new En},deps:[]},{provide:ui,useClass:Ti,multi:!0,deps:[Jo,Eo,uo]},{provide:ui,useClass:Ii,multi:!0,deps:[Jo]},[],{provide:vi,useClass:vi,deps:[hi,fi,io]},{provide:ks,useExisting:vi},{provide:di,useExisting:fi},{provide:fi,useClass:fi,deps:[Jo]},{provide:Mo,useClass:Mo,deps:[Eo]},{provide:hi,useClass:hi,deps:[ui,Eo]},{provide:class{},useClass:ci,deps:[]},[]];let Ri=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:io,useValue:t.appId},{provide:ii,useExisting:io},ai]}}}return e.\u0275fac=function(t){return new(t||e)(mn(e,12))},e.\u0275mod=Me({type:e}),e.\u0275inj=X({providers:Di,imports:[ni,Qo]}),e})();"undefined"!=typeof window&&window;let Mi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ie({type:e,selectors:[["ikatsuba-root"]],decls:1355,vars:0,consts:[[1,"flex","items-start","mt-6","mb-6","max-w-3xl","m-auto"],["src","assets/iam.png",1,"rounded-full","w-20","mr-8"],[1,"text-gray-700","text-4xl","mt-3","mb-1"],[1,"text-gray-500"],["href","https://twitter.com/ItsTinkoff","target","_blank",1,"text-indigo-500"],["href","https://indepth.dev/","target","_blank",1,"text-indigo-500"],[1,"prose","xl:prose-xl","prose-red","m-auto"],["src","assets/angular-universal.png"],["href","https://github.com/angular/universal/blob/master/modules/express-engine/README.md"],["href","https://github.com/angular/universal/blob/master/modules/aspnetcore-engine/README.md"],["href","https://github.com/angular/universal/blob/master/modules/hapi-engine/README.md"],["href","https://github.com/angular/universal/tree/master/modules/socket-engine"],["href","https://www.npmjs.com/package/domino"],["href","https://indepth.dev/posts/1059/do-you-still-think-that-ngzone-zone-js-is-required-for-change-detection-in-angular"],["href","https://angular.io/api/core/ApplicationRef"],["href","https://angular.io/api/core/ApplicationRef#isStable"],["href","https://github.com/angular/angular/blob/11.1.x/packages/platform-server/src/utils.ts#L43"],["href","https://github.com/angular/angular/blob/11.1.x/packages/platform-server/src/utils.ts#L69"],["href","https://github.com/angular/angular/blob/11.1.x/packages/platform-server/src/utils.ts#L70"],[1,"code-highlighted","code-tsx"],[1,"syntax-all","syntax-keyword"],[1,"syntax-all","syntax-parameter"],[1,"syntax-all","syntax-string"],[1,"syntax-all","syntax-constant"],[1,"syntax-all","syntax-entity"],[1,"syntax-all","syntax-variable"],["href","https://github.com/IKatsuba/ngx-ssr"],["href","https://angular.io/api/core/NgZone"],[1,"syntax-all","syntax-comment"],["href","https://github.com/TinkoffCreditSystems/taiga-ui/blob/main/projects/cdk/observables/zone-free.ts#L30"],["href","https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching"],["href","https://ng-web-apis.github.io/"],["href","https://github.com/ng-web-apis/common#tokens"],["href","https://github.com/ng-web-apis/universal"]],template:function(e,t){if(1&e){rs(0,"div",0),os(1,"img",1),rs(2,"div"),rs(3,"h2",2),as(4,"Igor Katsuba"),ss(),rs(5,"p",3),as(6," Angular Researcher / Working at "),rs(7,"a",4),as(8,"ItsTinkoff"),ss(),as(9," / Author at "),rs(10,"a",5),as(11,"indepth.dev"),ss(),ss(),ss(),ss(),rs(12,"section",6),os(13,"hr"),rs(14,"h1"),as(15,"Angular Universal: real app problems"),ss(),rs(16,"figure"),os(17,"img",7),ss(),rs(18,"p"),rs(19,"strong"),as(20,"Angular Universal"),ss(),as(21," is an open-source project that extends the functionality of "),rs(22,"code"),as(23,"@angular/platform-server"),ss(),as(24,". The project makes server-side rendering possible in Angular. "),ss(),rs(25,"p"),as(26,"Angular Universal supports multiple backends:"),ss(),rs(27,"ol"),rs(28,"li"),rs(29,"a",8),as(30,"Express"),ss(),ss(),rs(31,"li"),rs(32,"a",9),as(33,"ASP.NET Core"),ss(),ss(),rs(34,"li"),rs(35,"a",10),as(36,"hapi"),ss(),ss(),ss(),rs(37,"p"),as(38," Another package "),rs(39,"a",11),as(40,"Socket Engine"),ss(),as(41," is a framework-agnostic that theoretically allows any backend to be connected to an SSR-server. "),ss(),rs(42,"p"),as(43," This article will discuss the issues and possible solutions we encountered while developing a real application with Angular Universal and Express. "),ss(),os(44,"hr"),rs(45,"h1"),as(46,"How Angular Universal Works"),ss(),rs(47,"p"),as(48," For rendering on the server, Angular uses the DOM implementation for node.js \u2014 "),rs(49,"a",12),as(50,"domino"),ss(),as(51,". For each GET request, "),rs(52,"code"),as(53,"domino"),ss(),as(54," creates a similar Browser Document object. In that object context, Angular initializes the application. "),ss(),rs(55,"p"),as(56," The app makes requests to the backend, performs various asynchronous tasks, and applies any change detection from components to the DOM while still running inside node.js environment. The render engine then serializes DOM into a string and serves up the string to the server. The server sends this HTML as a response to the GET request. Angular application on the server is destroyed after rendering. "),ss(),os(57,"hr"),rs(58,"h1"),as(59,"SSR issues in Angular"),ss(),rs(60,"h2"),as(61,"1. Infinite page loading"),ss(),rs(62,"h3"),as(63,"Situation"),ss(),rs(64,"p"),as(65," The user opens a page on your site and sees a white screen. In other words, the time until the first byte takes too long. The browser wants to receive a response from the server, but the request ends up with a timeout. "),ss(),rs(66,"h3"),as(67,"Why is this happening"),ss(),rs(68,"p"),as(69," Most likely, the problem lies in the Angular-specific SSR mechanism. Before we understand at what point the page is rendered, let's define Zone.js and ApplicationRef. "),ss(),rs(70,"p"),rs(71,"a",13),rs(72,"strong"),as(73,"Zone.js"),ss(),ss(),as(74," is a tool that allows you to track asynchronous operations. With its help, Angular creates its zone and launches the application in it. At the end of each asynchronous operation in the Angular zone, change detection is triggered. "),ss(),rs(75,"p"),rs(76,"strong"),as(77,"ApplicationRef"),ss(),as(78," is a reference to the running application ("),rs(79,"a",14),as(80,"docs"),ss(),as(81,"). Of all this class's functionality, we are interested in the "),rs(82,"a",15),as(83,"ApplicationRef#isStable"),ss(),as(84," property. It is an Observable that emits a boolean. isStable is true when no asynchronous tasks are running in the Angular zone and false when there are any. "),ss(),rs(85,"p"),rs(86,"strong"),as(87,"So, application stability is the state of the application, which depends on the presence of asynchronous tasks in the Angular zone."),ss(),ss(),rs(88,"p"),as(89," So, at the moment of "),rs(90,"a",16),as(91,"the first onset of stability"),ss(),as(92,", Angular "),rs(93,"a",17),as(94,"renders the current state"),ss(),as(95," applications and "),rs(96,"a",18),as(97,"destroys the platform"),ss(),as(98,". And the platform will destroy the application. "),ss(),rs(99,"p"),as(100," Now we can assume that the user is trying to open an application that cannot achieve stability. setInterval, rxjs.interval or any other recursive asynchronous operation running in the Angular zone will make stability impossible. HTTP requests also affect stability. The lingering request on the server delays the moment the page is rendered. "),ss(),rs(101,"h3"),as(102,"Possible Solution"),ss(),rs(103,"p"),as(104," To avoid the situation with long requests, use the timeout operator from rxjs library: "),ss(),rs(105,"pre"),rs(106,"code",19),rs(107,"span",20),as(108,"import"),ss(),as(109," { "),rs(110,"span",21),as(111,"timeout"),ss(),as(112,", "),rs(113,"span",21),as(114,"catchError"),ss(),as(115," } "),rs(116,"span",20),as(117,"from"),ss(),as(118," "),rs(119,"span",22),as(120,"'rxjs/operators'"),ss(),as(121,";\n"),rs(122,"span",20),as(123,"import"),ss(),as(124," { "),rs(125,"span",21),as(126,"of"),ss(),as(127," } "),rs(128,"span",20),as(129,"from"),ss(),as(130," "),rs(131,"span",22),as(132,"'rxjs/observable/of'"),ss(),as(133,";\n\n"),rs(134,"span",21),as(135,"http"),ss(),as(136,"."),rs(137,"span",23),as(138,"get"),ss(),as(139,"("),rs(140,"span",22),as(141,"'https://example.com'"),ss(),as(142,")\n\t."),rs(143,"span",24),as(144,"pipe"),ss(),as(145,"(\n\t\t"),rs(146,"span",24),as(147,"timeout"),ss(),as(148,"("),rs(149,"span",23),as(150,"2000"),ss(),as(151,"),\n\t\t"),rs(152,"span",24),as(153,"catchError"),ss(),as(154,"("),rs(155,"span",25),as(156,"e"),ss(),as(157," "),rs(158,"span",20),as(159,"=>"),ss(),as(160," "),rs(161,"span",20),as(162,"of"),ss(),as(163,"("),rs(164,"span",23),as(165,"null"),ss(),as(166,"))\n\t)."),rs(167,"span",24),as(168,"subscribe"),ss(),as(169,"()"),ss(),ss(),rs(170,"p"),as(171," The operator will throw an exception after a specified if no server response is received. "),ss(),rs(172,"p"),as(173,"This approach has 2 cons:"),ss(),rs(174,"ul"),rs(175,"li"),as(176,"There is no convenient division of logic by platform."),ss(),rs(177,"li"),as(178,"The timeout operator must be written manually for each request."),ss(),ss(),rs(179,"p"),as(180," As a more straightforward solution, you can use the NgxSsrTimeoutModule module from the "),rs(181,"a",26),as(182,"@ngx-ssr/timeout"),ss(),as(183," package. Import the module with the timeout value into the root module of the application. If the module is imported into AppServerModule, then HTTP request timeouts will only work for the server. "),ss(),rs(184,"pre"),rs(185,"code",19),rs(186,"span",20),as(187,"import"),ss(),as(188," { "),rs(189,"span",21),as(190,"NgModule"),ss(),as(191," } "),rs(192,"span",20),as(193,"from"),ss(),as(194," "),rs(195,"span",22),as(196,"'@angular/core'"),ss(),as(197,";\n"),rs(198,"span",20),as(199,"import"),ss(),as(200," {\n\t"),rs(201,"span",21),as(202,"ServerModule"),ss(),as(203,",\n    } "),rs(204,"span",20),as(205,"from"),ss(),as(206," "),rs(207,"span",22),as(208,"'@angular/platform-server'"),ss(),as(209,";\n"),rs(210,"span",20),as(211,"import"),ss(),as(212," { "),rs(213,"span",21),as(214,"AppModule"),ss(),as(215," } "),rs(216,"span",20),as(217,"from"),ss(),as(218," "),rs(219,"span",22),as(220,"'./app.module'"),ss(),as(221,";\n"),rs(222,"span",20),as(223,"import"),ss(),as(224," { "),rs(225,"span",21),as(226,"AppComponent"),ss(),as(227," } "),rs(228,"span",20),as(229,"from"),ss(),as(230," "),rs(231,"span",22),as(232,"'./app.component'"),ss(),as(233,";\n"),rs(234,"span",20),as(235,"import"),ss(),as(236," { "),rs(237,"span",21),as(238,"NgxSsrTimeoutModule"),ss(),as(239," } "),rs(240,"span",20),as(241,"from"),ss(),as(242," "),rs(243,"span",22),as(244,"'@ngx-ssr/timeout'"),ss(),as(245,";\n\n@"),rs(246,"span",24),as(247,"NgModule"),ss(),as(248,"({\n    imports: [\n      "),rs(249,"span",21),as(250,"AppModule"),ss(),as(251,",\n      "),rs(252,"span",21),as(253,"ServerModule"),ss(),as(254,",\n      "),rs(255,"span",21),as(256,"NgxSsrTimeoutModule"),ss(),as(257,"."),rs(258,"span",24),as(259,"forRoot"),ss(),as(260,"({ timeout: "),rs(261,"span",23),as(262,"500"),ss(),as(263," }),\n\t],\n\tbootstrap: ["),rs(264,"span",21),as(265,"AppComponent"),ss(),as(266,"],\n})\n"),rs(267,"span",20),as(268,"export"),ss(),as(269," "),rs(270,"span",20),as(271,"class"),ss(),as(272," "),rs(273,"span",24),as(274,"AppServerModule"),ss(),as(275," {}"),ss(),ss(),rs(276,"p"),as(277," Use the "),rs(278,"a",27),as(279,"NgZone"),ss(),as(280," service to take asynchronous operations out of the Angular zone. "),ss(),rs(281,"pre"),rs(282,"code",19),rs(283,"span",20),as(284,"import"),ss(),as(285," { "),rs(286,"span",21),as(287,"Injectable"),ss(),as(288,", "),rs(289,"span",21),as(290,"NgZone"),ss(),as(291," } "),rs(292,"span",20),as(293,"from"),ss(),as(294," "),rs(295,"span",22),as(296,'"@angular/core"'),ss(),as(297,";\n\n@"),rs(298,"span",24),as(299,"Injectable"),ss(),as(300,"()\n"),rs(301,"span",20),as(302,"export"),ss(),as(303," "),rs(304,"span",20),as(305,"class"),ss(),as(306," "),rs(307,"span",24),as(308,"SomeService"),ss(),as(309," {\n    "),rs(310,"span",20),as(311,"constructor"),ss(),as(312,"("),rs(313,"span",20),as(314,"private"),ss(),as(315," "),rs(316,"span",25),as(317,"ngZone"),ss(),rs(318,"span",20),as(319,":"),ss(),as(320," "),rs(321,"span",24),as(322,"NgZone"),ss(),as(323,"){\n\t\t"),rs(324,"span",23),as(325,"this"),ss(),as(326,"."),rs(327,"span",21),as(328,"ngZone"),ss(),as(329,"."),rs(330,"span",24),as(331,"runOutsideAngular"),ss(),as(332,"(() "),rs(333,"span",20),as(334,"=>"),ss(),as(335," {\n    "),rs(336,"span",24),as(337,"interval"),ss(),as(338,"("),rs(339,"span",23),as(340,"1"),ss(),as(341,")."),rs(342,"span",24),as(343,"subscribe"),ss(),as(344,"(() "),rs(345,"span",20),as(346,"=>"),ss(),as(347," {\n\t\t\t\t"),rs(348,"span",28),as(349,"// somo code\n"),ss(),as(350,"\t\t\t})\n\t\t});\n\t}\n}"),ss(),ss(),rs(351,"p"),as(352," To solve this problem, you can use the "),rs(353,"a",29),as(354,"tuiZonefree"),ss(),as(355," from the "),rs(356,"code"),as(357,"@taiga-ui/cdk"),ss(),as(358,": "),ss(),rs(359,"pre"),rs(360,"code",19),rs(361,"span",20),as(362,"import"),ss(),as(363," { "),rs(364,"span",21),as(365,"Injectable"),ss(),as(366,", "),rs(367,"span",21),as(368,"NgZone"),ss(),as(369," } "),rs(370,"span",20),as(371,"from"),ss(),as(372," "),rs(373,"span",22),as(374,'"@angular/core"'),ss(),as(375,";\n"),rs(376,"span",20),as(377,"import"),ss(),as(378," { "),rs(379,"span",21),as(380,"tuiZonefree"),ss(),as(381," } "),rs(382,"span",20),as(383,"from"),ss(),as(384," "),rs(385,"span",22),as(386,'"@taiga-ui/cdk"'),ss(),as(387,";\n\n@"),rs(388,"span",24),as(389,"Injectable"),ss(),as(390,"()\n"),rs(391,"span",20),as(392,"export"),ss(),as(393," "),rs(394,"span",20),as(395,"class"),ss(),as(396," "),rs(397,"span",24),as(398,"SomeService"),ss(),as(399," {\n    "),rs(400,"span",20),as(401,"constructor"),ss(),as(402,"("),rs(403,"span",20),as(404,"private"),ss(),as(405," "),rs(406,"span",25),as(407,"ngZone"),ss(),rs(408,"span",20),as(409,":"),ss(),as(410," "),rs(411,"span",24),as(412,"NgZone"),ss(),as(413,"){\n\t\t"),rs(414,"span",24),as(415,"interval"),ss(),as(416,"("),rs(417,"span",23),as(418,"1"),ss(),as(419,")."),rs(420,"span",24),as(421,"pipe"),ss(),as(422,"("),rs(423,"span",24),as(424,"tuiZonefree"),ss(),as(425,"("),rs(426,"span",21),as(427,"ngZone"),ss(),as(428,"))."),rs(429,"span",24),as(430,"subscribe"),ss(),as(431,"()\n\t}\n}"),ss(),ss(),rs(432,"p"),as(433," But there is a nuance. Any task must be interrupted when the application is destroyed. Otherwise, you can catch a memory leak (see issue #5). You also need to understand that tasks that are removed from the zone will not trigger change detection. "),ss(),rs(434,"h2"),as(435,"2. Lack of cache out of the box"),ss(),rs(436,"h3"),as(437,"Situation"),ss(),rs(438,"p"),as(439," The user loads the home page of the site. The server requests data for the master and renders it, spending 2 seconds on it. Then the user goes from the main to the child section. Then it tries to go back and waits for the same 2 seconds as the first time. "),ss(),rs(440,"p"),as(441," If we assume that the data on which the main render depends has not changed, it turns out that HTML with this set has already been rendered. And in theory, we can reuse the HTML we got earlier. "),ss(),rs(442,"h3"),as(443,"Possible Solution"),ss(),rs(444,"p"),as(445," Various caching techniques come to the rescue. We'll cover two: in-memory cache and HTTP cache. "),ss(),rs(446,"p"),rs(447,"strong"),as(448,"HTTP cache."),ss(),as(449," When using a network cache, it's all about setting the correct response headers on the server. They specify the cache lifetime and caching policy: "),ss(),rs(450,"pre"),rs(451,"code",19),rs(452,"span",21),as(453,"Cache"),ss(),rs(454,"span",20),as(455,"-"),ss(),rs(456,"span",21),as(457,"Control"),ss(),as(458,": "),rs(459,"span",21),as(460,"max"),ss(),rs(461,"span",20),as(462,"-"),ss(),rs(463,"span",21),as(464,"age"),ss(),as(465," "),rs(466,"span",20),as(467,"="),ss(),as(468," "),rs(469,"span",23),as(470,"31536000"),ss(),ss(),ss(),rs(471,"p"),as(472," This option is suitable for an unauthorized zone and in the presence of long unchanging data. "),ss(),rs(473,"p"),as(474," You can read more about the HTTP cache "),rs(475,"a",30),as(476,"here"),ss(),ss(),rs(477,"p"),rs(478,"strong"),as(479,"In-memory cache."),ss(),as(480," The in-memory cache can be used for both rendered pages and API requests within the application itself. Both possibilities are package "),rs(481,"code"),as(482,"@ngx-ssr/cache"),ss(),as(483,". "),ss(),rs(484,"p"),as(485," Add the NgxSsrCacheModule module to the AppModule to cache API requests and on the server in the browser. "),ss(),rs(486,"p"),as(487," The "),rs(488,"code"),as(489,"maxSize"),ss(),as(490," property is responsible for the maximum cache size. A value of 50 means that the cache will contain more than 50 of the last GET requests made from the application. "),ss(),rs(491,"p"),as(492," The "),rs(493,"code"),as(494,"maxAge"),ss(),as(495," property is responsible for the cache lifetime. Specified in milliseconds. "),ss(),rs(496,"pre"),rs(497,"code",19),rs(498,"span",20),as(499,"import"),ss(),as(500," { "),rs(501,"span",21),as(502,"BrowserModule"),ss(),as(503," } "),rs(504,"span",20),as(505,"from"),ss(),as(506," "),rs(507,"span",22),as(508,"'@angular/platform-browser'"),ss(),as(509,";\n"),rs(510,"span",20),as(511,"import"),ss(),as(512," { "),rs(513,"span",21),as(514,"NgModule"),ss(),as(515," } "),rs(516,"span",20),as(517,"from"),ss(),as(518," "),rs(519,"span",22),as(520,"'@angular/core'"),ss(),as(521,";\n"),rs(522,"span",20),as(523,"import"),ss(),as(524," { "),rs(525,"span",21),as(526,"AppComponent"),ss(),as(527," } "),rs(528,"span",20),as(529,"from"),ss(),as(530," "),rs(531,"span",22),as(532,"'./app.component'"),ss(),as(533,";\n"),rs(534,"span",20),as(535,"import"),ss(),as(536," { "),rs(537,"span",21),as(538,"NgxSsrCacheModule"),ss(),as(539," } "),rs(540,"span",20),as(541,"from"),ss(),as(542," "),rs(543,"span",22),as(544,"'@ngx-ssr/cache'"),ss(),as(545,";\n"),rs(546,"span",20),as(547,"import"),ss(),as(548," { "),rs(549,"span",21),as(550,"environment"),ss(),as(551," } "),rs(552,"span",20),as(553,"from"),ss(),as(554," "),rs(555,"span",22),as(556,"'../environments/environment'"),ss(),as(557,";\n\n@"),rs(558,"span",24),as(559,"NgModule"),ss(),as(560,"({\n    declarations: ["),rs(561,"span",21),as(562,"AppComponent"),ss(),as(563,"],\n    imports: [\n      "),rs(564,"span",21),as(565,"BrowserModule"),ss(),as(566,",\n      "),rs(567,"span",21),as(568,"NgxSsrCacheModule"),ss(),as(569,"."),rs(570,"span",24),as(571,"configLruCache"),ss(),as(572,"({ maxAge: "),rs(573,"span",23),as(574,"10"),ss(),as(575," "),rs(576,"span",20);as(577,"*"),ss(),as(578," "),rs(579,"span",23),as(580,"60_000"),ss(),as(581,", maxSize: "),rs(582,"span",23),as(583,"50"),ss(),as(584," }),\n\t],\n\tbootstrap: ["),rs(585,"span",21),as(586,"AppComponent"),ss(),as(587,"],\n})\n"),rs(588,"span",20),as(589,"export"),ss(),as(590," "),rs(591,"span",20),as(592,"class"),ss(),as(593," "),rs(594,"span",24),as(595,"AppModule"),ss(),as(596," {}"),ss(),ss(),rs(597,"p"),as(598,"You can go ahead and cache the HTML itself."),ss(),rs(599,"p"),as(600," For example, everything in the same package "),rs(601,"code"),as(602,"@ngx-ssr/cache"),ss(),as(603," has a submodule "),rs(604,"code"),as(605,"@ngx-ssr/cache/express"),ss(),as(606,". It imports a single "),rs(607,"code"),as(608,"withCache"),ss(),as(609," function. The function is a wrapper over the render engine. "),ss(),rs(610,"pre"),rs(611,"code",19),rs(612,"span",20),as(613,"import"),ss(),as(614," { "),rs(615,"span",21),as(616,"ngExpressEngine"),ss(),as(617," } "),rs(618,"span",20),as(619,"from"),ss(),as(620," "),rs(621,"span",22),as(622,"'@nguniversal/express-engine'"),ss(),as(623,";\n      "),rs(624,"span",20),as(625,"import"),ss(),as(626," { "),rs(627,"span",21),as(628,"LRUCache"),ss(),as(629," } "),rs(630,"span",20),as(631,"from"),ss(),as(632," "),rs(633,"span",22),as(634,"'@ngx-ssr/cache'"),ss(),as(635,";\n      "),rs(636,"span",20),as(637,"import"),ss(),as(638," { "),rs(639,"span",21),as(640,"withCache"),ss(),as(641," } "),rs(642,"span",20),as(643,"from"),ss(),as(644," "),rs(645,"span",22),as(646,"'@ngx-ssr/cache/express'"),ss(),as(647,";\n\n      "),rs(648,"span",21),as(649,"server"),ss(),as(650,"."),rs(651,"span",24),as(652,"engine"),ss(),as(653,"(\n      "),rs(654,"span",22),as(655,"'html'"),ss(),as(656,",\n      "),rs(657,"span",24),as(658,"withCache"),ss(),as(659,"(\n      "),rs(660,"span",20),as(661,"new"),ss(),as(662," "),rs(663,"span",24),as(664,"LRUCache"),ss(),as(665,"({ maxAge: "),rs(666,"span",23),as(667,"10"),ss(),as(668," "),rs(669,"span",20),as(670,"*"),ss(),as(671," "),rs(672,"span",23),as(673,"60_000"),ss(),as(674,", maxSize: "),rs(675,"span",23),as(676,"100"),ss(),as(677," }),\n\t\t"),rs(678,"span",24),as(679,"ngExpressEngine"),ss(),as(680,"({\n\t\t\tbootstrap: "),rs(681,"span",21),as(682,"AppServerModule"),ss(),as(683,",\n      })\n\t)\n);"),ss(),ss(),rs(684,"h2"),as(685,"3. Server errors of type ReferenceError: localStorage is not defined"),ss(),rs(686,"h3"),as(687,"Situation"),ss(),rs(688,"p"),as(689," The developer calls localStorage right in the body of the service. It retrieves data from the local storage by key. But on the server, this code crashes with an error: ReferenceError: localStorage is undefined. "),ss(),rs(690,"h3"),as(691,"Why is this happening"),ss(),rs(692,"p"),as(693," When running an Angular application on a server, the standard browser API is missing from the global space. For example, there's no global object "),rs(694,"code"),as(695,"document"),ss(),as(696," like you'd expect in a browser environment. To get the reference to the document, you must use the DOCUMENT token and DI. "),ss(),rs(697,"h3"),as(698,"Possible Solution"),ss(),rs(699,"p"),as(700," Don't use the browser API through the global space. There is DI for this. Through DI, you can replace or disable browser implementations for their safe use on the server. "),ss(),rs(701,"p"),as(702," The "),rs(703,"a",31),as(704,"Web API for Angular"),ss(),as(705," can be used to resolve this issue. "),ss(),rs(706,"p"),as(707,"For example:"),ss(),rs(708,"pre"),rs(709,"code",19),rs(710,"span",20),as(711,"import"),ss(),as(712," {"),rs(713,"span",21),as(714,"Component"),ss(),as(715,", "),rs(716,"span",21),as(717,"Inject"),ss(),as(718,", "),rs(719,"span",21),as(720,"NgModule"),ss(),as(721,"} "),rs(722,"span",20),as(723,"from"),ss(),as(724," "),rs(725,"span",22),as(726,"'@angular/core'"),ss(),as(727,";\n"),rs(728,"span",20),as(729,"import"),ss(),as(730," {"),rs(731,"span",21),as(732,"LOCAL_STORAGE"),ss(),as(733,"} "),rs(734,"span",20),as(735,"from"),ss(),as(736," "),rs(737,"span",22),as(738,"'@ng-web-apis/common'"),ss(),as(739,";\n\n@"),rs(740,"span",24),as(741,"Component"),ss(),as(742,"({"),rs(743,"span",20),as(744,"..."),ss(),as(745,"})\n"),rs(746,"span",20),as(747,"export"),ss(),as(748," "),rs(749,"span",20),as(750,"class"),ss(),as(751," "),rs(752,"span",24),as(753,"SomeComponent"),ss(),as(754," {\n    "),rs(755,"span",20),as(756,"constructor"),ss(),as(757,"(@"),rs(758,"span",24),as(759,"Inject"),ss(),as(760,"("),rs(761,"span",23),as(762,"LOCAL_STORAGE"),ss(),as(763,") "),rs(764,"span",25),as(765,"localStorage"),ss(),rs(766,"span",20),as(767,":"),ss(),as(768," "),rs(769,"span",24),as(770,"Storage"),ss(),as(771,") {\n\t\t"),rs(772,"span",21),as(773,"localStorage"),ss(),as(774,"."),rs(775,"span",23),as(776,"getItem"),ss(),as(777,"("),rs(778,"span",22),as(779,"'key'"),ss(),as(780,");\n\t}\n}"),ss(),ss(),rs(781,"p"),as(782," The example above uses the "),rs(783,"code"),as(784,"LOCAL_STORAGE"),ss(),as(785," token from the "),rs(786,"a",32),as(787,"@ng-web-apis/common"),ss(),as(788," package. But when we run this code on the server, we will get an error from the description. Just add "),rs(789,"code"),as(790,"UNIVERSAL_LOCAL_STORAGE"),ss(),as(791," from the package "),rs(792,"a",33),as(793,"@ng-web-apis/universal"),ss(),as(794," in the providers "),rs(795,"code"),as(796,"AppServerModule"),ss(),as(797,", and by the token "),rs(798,"code"),as(799,"LOCAL_STORAGE"),ss(),as(800,", you will receive an implementation of localStorage for the server. "),ss(),rs(801,"pre"),rs(802,"code",19),rs(803,"span",20),as(804,"import"),ss(),as(805," { "),rs(806,"span",21),as(807,"NgModule"),ss(),as(808," } "),rs(809,"span",20),as(810,"from"),ss(),as(811," "),rs(812,"span",22),as(813,"'@angular/core'"),ss(),as(814,";\n"),rs(815,"span",20),as(816,"import"),ss(),as(817," {\n    "),rs(818,"span",21),as(819,"ServerModule"),ss(),as(820,",\n} "),rs(821,"span",20),as(822,"from"),ss(),as(823," "),rs(824,"span",22),as(825,"'@angular/platform-server'"),ss(),as(826,";\n"),rs(827,"span",20),as(828,"import"),ss(),as(829," { "),rs(830,"span",21),as(831,"AppModule"),ss(),as(832," } "),rs(833,"span",20),as(834,"from"),ss(),as(835," "),rs(836,"span",22),as(837,"'./app.module'"),ss(),as(838,";\n"),rs(839,"span",20),as(840,"import"),ss(),as(841," { "),rs(842,"span",21),as(843,"AppComponent"),ss(),as(844," } "),rs(845,"span",20),as(846,"from"),ss(),as(847," "),rs(848,"span",22),as(849,"'./app.component'"),ss(),as(850,";\n"),rs(851,"span",20),as(852,"import"),ss(),as(853," { "),rs(854,"span",21),as(855,"UNIVERSAL_LOCAL_STORAGE"),ss(),as(856," } "),rs(857,"span",20),as(858,"from"),ss(),as(859," "),rs(860,"span",22),as(861,"'@ngx-ssr/timeout'"),ss(),as(862,";\n\n@"),rs(863,"span",24),as(864,"NgModule"),ss(),as(865,"({\n    imports: [\n      "),rs(866,"span",21),as(867,"AppModule"),ss(),as(868,",\n      "),rs(869,"span",21),as(870,"ServerModule"),ss(),as(871,",\n    ],\n    providers: ["),rs(872,"span",23),as(873,"UNIVERSAL_LOCAL_STORAGE"),ss(),as(874,"],\n    bootstrap: ["),rs(875,"span",21),as(876,"AppComponent"),ss(),as(877,"],\n})\n"),rs(878,"span",20),as(879,"export"),ss(),as(880," "),rs(881,"span",20),as(882,"class"),ss(),as(883," "),rs(884,"span",24),as(885,"AppServerModule"),ss(),as(886," {}"),ss(),ss(),rs(887,"h2"),as(888,"4. Inconvenient separation of logic"),ss(),rs(889,"h3"),as(890,"Situation"),ss(),rs(891,"p"),as(892," If you need to render the block only in the browser, you need to write approximately the following code: "),ss(),rs(893,"pre"),rs(894,"code",19),as(895,"@"),rs(896,"span",24),as(897,"Component"),ss(),as(898,"({\n    selector: "),rs(899,"span",22),as(900,"'ram-root'"),ss(),as(901,",\n\ttemplate: "),rs(902,"span",22),as(903,"'<some-\u0441omp *ngIf=\"isServer\"></some-\u0441omp>'"),ss(),as(904,",\n\tstyleUrls: ["),rs(905,"span",22),as(906,"'./app.component.less'"),ss(),as(907,"],\n})\n"),rs(908,"span",20),as(909,"export"),ss(),as(910," "),rs(911,"span",20),as(912,"class"),ss(),as(913," "),rs(914,"span",24),as(915,"AppComponent"),ss(),as(916," {\n      isServer "),rs(917,"span",20),as(918,"="),ss(),as(919," "),rs(920,"span",24),as(921,"isPlatformServer"),ss(),as(922,"("),rs(923,"span",23),as(924,"this"),ss(),as(925,"."),rs(926,"span",21),as(927,"platformId"),ss(),as(928,");\n\n        "),rs(929,"span",20),as(930,"constructor"),ss(),as(931,"(@"),rs(932,"span",24),as(933,"Inject"),ss(),as(934,"("),rs(935,"span",23),as(936,"PLATFORM_ID"),ss(),as(937,") "),rs(938,"span",20),as(939,"private"),ss(),as(940," "),rs(941,"span",25),as(942,"platformId"),ss(),rs(943,"span",20),as(944,":"),ss(),as(945," "),rs(946,"span",24),as(947,"Object"),ss(),as(948,"){}\n        }"),ss(),ss(),rs(949,"p"),as(950," The component needs to get the "),rs(951,"code"),as(952,"PLATFORM_ID"),ss(),as(953,", target platform, and understand the class's public property. This property will be used in the template in conjunction with the "),rs(954,"code"),as(955,"ngIf"),ss(),as(956," directive. "),ss(),rs(957,"h3"),as(958,"Possible Solution"),ss(),rs(959,"p"),as(960," With the help of structural directives and DI, the above mechanism can be greatly simplified. "),ss(),rs(961,"p"),as(962,"First, let's wrap the server definition in a token."),ss(),rs(963,"pre"),rs(964,"code",19),rs(965,"span",20),as(966,"export"),ss(),as(967," "),rs(968,"span",20),as(969,"const"),ss(),as(970," IS_SERVER_PLATFORM "),rs(971,"span",20),as(972,"="),ss(),as(973," "),rs(974,"span",20),as(975,"new"),ss(),as(976," "),rs(977,"span",24),as(978,"InjectionToken"),ss(),as(979,"<"),rs(980,"span",23),as(981,"boolean"),ss(),as(982,">("),rs(983,"span",22),as(984,"'Is server?'"),ss(),as(985,", {\n        factory() {\n      "),rs(986,"span",20),as(987,"return"),ss(),as(988," "),rs(989,"span",24),as(990,"isPlatformServer"),ss(),as(991,"("),rs(992,"span",24),as(993,"inject"),ss(),as(994,"("),rs(995,"span",23),as(996,"PLATFORM_ID"),ss(),as(997,"));\n        },\n      });"),ss(),ss(),rs(998,"p"),as(999," Create a structured directive using the "),rs(1e3,"code"),as(1001,"IS_SERVER_PLATFORM"),ss(),as(1002," token with one simple target: render the component only on the server. "),ss(),rs(1003,"pre"),rs(1004,"code",19),as(1005,"@"),rs(1006,"span",24),as(1007,"Directive"),ss(),as(1008,"({\n        selector: "),rs(1009,"span",22),as(1010,"'[ifIsServer]'"),ss(),as(1011,",\n      })\n"),rs(1012,"span",20),as(1013,"export"),ss(),as(1014," "),rs(1015,"span",20),as(1016,"class"),ss(),as(1017," "),rs(1018,"span",24),as(1019,"IfIsServerDirective"),ss(),as(1020," {\n    "),rs(1021,"span",20),as(1022,"constructor"),ss(),as(1023,"(\n      @"),rs(1024,"span",24),as(1025,"Inject"),ss(),as(1026,"("),rs(1027,"span",23),as(1028,"IS_SERVER_PLATFORM"),ss(),as(1029,") "),rs(1030,"span",25),as(1031,"isServer"),ss(),rs(1032,"span",20),as(1033,":"),ss(),as(1034," "),rs(1035,"span",23),as(1036,"boolean"),ss(),as(1037,",\n      "),rs(1038,"span",25),as(1039,"templateRef"),ss(),rs(1040,"span",20),as(1041,":"),ss(),as(1042," "),rs(1043,"span",24),as(1044,"TemplateRef"),ss(),as(1045,"<"),rs(1046,"span",23),as(1047,"any"),ss(),as(1048,">,\n\t\t"),rs(1049,"span",25),as(1050,"viewContainer"),ss(),rs(1051,"span",20),as(1052,":"),ss(),as(1053," "),rs(1054,"span",24),as(1055,"ViewContainerRef"),ss(),as(1056,"\n\t) {\n\t\t"),rs(1057,"span",20),as(1058,"if"),ss(),as(1059," ("),rs(1060,"span",21),as(1061,"isServer"),ss(),as(1062,") {\n    "),rs(1063,"span",21),as(1064,"viewContainer"),ss(),as(1065,"."),rs(1066,"span",24),as(1067,"createEmbeddedView"),ss(),as(1068,"("),rs(1069,"span",21),as(1070,"templateRef"),ss(),as(1071,");\n\t\t}\n\t}\n}"),ss(),ss(),rs(1072,"p"),as(1073,"The code looks similar to the "),rs(1074,"code"),as(1075,"IfIsBowser"),ss(),as(1076," directive."),ss(),rs(1077,"p"),as(1078,"Now let's refactor the component:"),ss(),rs(1079,"pre"),rs(1080,"code",19),as(1081,"@"),rs(1082,"span",24),as(1083,"Component"),ss(),as(1084,"({\n    selector: "),rs(1085,"span",22),as(1086,"'ram-root'"),ss(),as(1087,",\n\ttemplate: "),rs(1088,"span",22),as(1089,"'<some-\u0441omp *ifIsServer\"></some-\u0441omp>'"),ss(),as(1090,",\n\tstyleUrls: ["),rs(1091,"span",22),as(1092,"'./app.component.less'"),ss(),as(1093,"],\n})\n"),rs(1094,"span",20),as(1095,"export"),ss(),as(1096," "),rs(1097,"span",20),as(1098,"class"),ss(),as(1099," "),rs(1100,"span",24),as(1101,"AppComponent"),ss(),as(1102," {}"),ss(),ss(),rs(1103,"p"),as(1104," Extra properties have been removed from the component. The component template is now a bit simpler. "),ss(),rs(1105,"p"),as(1106," Such directives declaratively hide and show content depending on the platform. "),ss(),rs(1107,"p"),as(1108," We have collected the tokens and directives in the package "),rs(1109,"code"),as(1110,"@ngx-ssr/platform"),ss(),as(1111,". "),ss(),rs(1112,"h2"),as(1113,"5. Memory Leak"),ss(),rs(1114,"h3"),as(1115,"Situation"),ss(),rs(1116,"p"),as(1117," At initialization, the service starts an interval and performs some actions. "),ss(),rs(1118,"pre"),rs(1119,"code",19),rs(1120,"span",20),as(1121,"import"),ss(),as(1122," { "),rs(1123,"span",21),as(1124,"Injectable"),ss(),as(1125,", "),rs(1126,"span",21),as(1127,"NgZone"),ss(),as(1128," } "),rs(1129,"span",20),as(1130,"from"),ss(),as(1131," "),rs(1132,"span",22),as(1133,'"@angular/core"'),ss(),as(1134,";\n"),rs(1135,"span",20),as(1136,"import"),ss(),as(1137," { "),rs(1138,"span",21),as(1139,"interval"),ss(),as(1140," } "),rs(1141,"span",20),as(1142,"from"),ss(),as(1143," "),rs(1144,"span",22),as(1145,'"rxjs"'),ss(),as(1146,";\n\n@"),rs(1147,"span",24),as(1148,"Injectable"),ss(),as(1149,"()\n"),rs(1150,"span",20),as(1151,"export"),ss(),as(1152," "),rs(1153,"span",20),as(1154,"class"),ss(),as(1155," "),rs(1156,"span",24),as(1157,"LocationService"),ss(),as(1158," {\n    "),rs(1159,"span",20),as(1160,"constructor"),ss();as(1161,"("),rs(1162,"span",25),as(1163,"ngZone"),ss(),rs(1164,"span",20),as(1165,":"),ss(),as(1166," "),rs(1167,"span",24),as(1168,"NgZone"),ss(),as(1169,") {\n\t\t"),rs(1170,"span",21),as(1171,"ngZone"),ss(),as(1172,"."),rs(1173,"span",24),as(1174,"runOutsideAngular"),ss(),as(1175,"(() "),rs(1176,"span",20),as(1177,"=>"),ss(),as(1178," "),rs(1179,"span",24),as(1180,"interval"),ss(),as(1181,"("),rs(1182,"span",23),as(1183,"1000"),ss(),as(1184,")."),rs(1185,"span",24),as(1186,"subscribe"),ss(),as(1187,"(() "),rs(1188,"span",20),as(1189,"=>"),ss(),as(1190," {\n    "),rs(1191,"span",20),as(1192,"..."),ss(),as(1193,"\n\t\t}));\n\t}\n}"),ss(),ss(),rs(1194,"p"),as(1195," This code does not affect the application's stability, but the callback passed to subscribe will continue to be called if the application is destroyed on the server. Each launch of the application on the server will leave behind an artifact in the form of an interval. And this is a potential memory leak. "),ss(),rs(1196,"h3"),as(1197,"Possible Solution"),ss(),rs(1198,"p"),as(1199," In our case, the problem is solved by using the ngOnDestoroy hook. It works for both components and services. We need to save the subscription and terminate it when the service is destructed. There are many techniques for unsubscribing, but here is just one: "),ss(),rs(1200,"pre"),rs(1201,"code",19),rs(1202,"span",20),as(1203,"import"),ss(),as(1204," { "),rs(1205,"span",21),as(1206,"Injectable"),ss(),as(1207,", "),rs(1208,"span",21),as(1209,"NgZone"),ss(),as(1210,", "),rs(1211,"span",21),as(1212,"OnDestroy"),ss(),as(1213," } "),rs(1214,"span",20),as(1215,"from"),ss(),as(1216," "),rs(1217,"span",22),as(1218,'"@angular/core"'),ss(),as(1219,";\n"),rs(1220,"span",20),as(1221,"import"),ss(),as(1222," { "),rs(1223,"span",21),as(1224,"interval"),ss(),as(1225,", "),rs(1226,"span",21),as(1227,"Subscription"),ss(),as(1228," } "),rs(1229,"span",20),as(1230,"from"),ss(),as(1231," "),rs(1232,"span",22),as(1233,'"rxjs"'),ss(),as(1234,";\n\n@"),rs(1235,"span",24),as(1236,"Injectable"),ss(),as(1237,"()\n"),rs(1238,"span",20),as(1239,"export"),ss(),as(1240," "),rs(1241,"span",20),as(1242,"class"),ss(),as(1243," "),rs(1244,"span",24),as(1245,"LocationService"),ss(),as(1246," "),rs(1247,"span",20),as(1248,"implements"),ss(),as(1249," "),rs(1250,"span",24),as(1251,"OnDestroy"),ss(),as(1252," {\n    "),rs(1253,"span",20),as(1254,"private"),ss(),as(1255," subscription"),rs(1256,"span",20),as(1257,":"),ss(),as(1258," "),rs(1259,"span",24),as(1260,"Subscription"),ss(),as(1261,";\n\n    "),rs(1262,"span",20),as(1263,"constructor"),ss(),as(1264,"("),rs(1265,"span",25),as(1266,"ngZone"),ss(),rs(1267,"span",20),as(1268,":"),ss(),as(1269," "),rs(1270,"span",24),as(1271,"NgZone"),ss(),as(1272,") {\n    "),rs(1273,"span",23),as(1274,"this"),ss(),as(1275,"."),rs(1276,"span",21),as(1277,"subscription"),ss(),as(1278," "),rs(1279,"span",20),as(1280,"="),ss(),as(1281," "),rs(1282,"span",21),as(1283,"ngZone"),ss(),as(1284,"."),rs(1285,"span",24),as(1286,"runOutsideAngular"),ss(),as(1287,"(() "),rs(1288,"span",20),as(1289,"=>"),ss(),as(1290,"\n      "),rs(1291,"span",24),as(1292,"interval"),ss(),as(1293,"("),rs(1294,"span",23),as(1295,"1000"),ss(),as(1296,")."),rs(1297,"span",24),as(1298,"subscribe"),ss(),as(1299,"(() "),rs(1300,"span",20),as(1301,"=>"),ss(),as(1302," {})\n    );\n  }\n\n  ngOnDestroy()"),rs(1303,"span",20),as(1304,":"),ss(),as(1305," "),rs(1306,"span",23),as(1307,"void"),ss(),as(1308," {\n    "),rs(1309,"span",23),as(1310,"this"),ss(),as(1311,"."),rs(1312,"span",21),as(1313,"subscription"),ss(),as(1314,"."),rs(1315,"span",24),as(1316,"unsubscribe"),ss(),as(1317,"();\n  }\n}"),ss(),ss(),rs(1318,"h2"),as(1319,"6. Lack of rehydration"),ss(),rs(1320,"h3"),as(1321,"Situation"),ss(),rs(1322,"p"),as(1323," The user's browser displays a page received from the server, a white screen flickers for a moment, and the application starts functioning and looks normal. "),ss(),rs(1324,"h3"),as(1325,"Why is this happening"),ss(),rs(1326,"p"),as(1327," Angular does not know how to reuse what it has rendered on the server. It strips all the HTML from the root element and starts painting all over again. "),ss(),rs(1328,"h3"),as(1329,"Possible Solution"),ss(),rs(1330,"p"),as(1331," It still doesn't exist. But there is hope that there will be a solution. Angular Universal's roadmap has a clause: \"Full client rehydration strategy that reuses DOM elements/CSS rendered on the server\". "),ss(),rs(1332,"h2"),as(1333,"7. Inability to abort rendering"),ss(),rs(1334,"h3"),as(1335,"Situation"),ss(),rs(1336,"p"),as(1337," We are catching a critical error. Rendering and waiting for stability are meaningless. You need to interrupt the process and give the client the default index.html. "),ss(),rs(1338,"h3"),as(1339,"Why is this happening"),ss(),rs(1340,"p"),as(1341," Let's go back to "),rs(1342,"a",16),as(1343,"the moment of rendering the application"),ss(),as(1344,". It occurs when the application becomes stable. We can make our application stable faster using the solution from problem #1. But what if we want to abort the rendering process on the first caught error? What if we want to set a time limit on trying to render an application? "),ss(),rs(1345,"h3"),as(1346,"Possible Solution"),ss(),rs(1347,"p"),as(1348,"There is no solution to this problem now."),ss(),rs(1349,"h1"),as(1350,"Summary"),ss(),rs(1351,"p"),as(1352," Angular Universal is the only supported and most widely used solution for rendering Angular applications on the server. The difficulty of integrating into an existing application depends largely on the developer. "),ss(),rs(1353,"p"),as(1354," There are still unresolved issues that don't allow me to classify Angular Universal as a production-ready solution. It is suitable for landing pages and static pages, but on complex applications, you can collect many problems, the solution of which will break in the blink of the page due to the lack of rehydration. "),ss(),ss()}},styles:[""]}),e})(),ji=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Me({type:e,bootstrap:[Mi]}),e.\u0275inj=X({providers:[],imports:[[Ri.withServerTransition({appId:"serverApp"})]]}),e})();(function(){if(Vo)throw new Error("Cannot enable prod mode after platform setup.");Fo=!1})(),document.addEventListener("DOMContentLoaded",()=>{Oi().bootstrapModule(ji).catch(e=>console.error(e))})}},e=>{"use strict";e(e.s=584)}]);