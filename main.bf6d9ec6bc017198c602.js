(self.webpackChunkikatsuba=self.webpackChunkikatsuba||[]).push([[179],{137:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=137,e.exports=t},16:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}let s=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function i(e){setTimeout(()=>{throw e},0)}const a={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;i(e)},complete(){}},l=Array.isArray||(e=>e&&"number"==typeof e.length);function c(e){return null!==e&&"object"==typeof e}const u=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class h{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof h)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if(r(s)){n&&(this._unsubscribe=void 0);try{s.call(this)}catch(i){e=i instanceof u?p(i.errors):[i]}}if(l(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(i){e=e||[],i instanceof u?e=e.concat(p(i.errors)):e.push(i)}}}if(e)throw new u(e)}add(e){let t=e;if(!e)return h.EMPTY;switch(typeof e){case"function":t=new h(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof h)){const e=t;t=new h,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof h){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}function p(e){return e.reduce((e,t)=>e.concat(t instanceof u?t.errors:t),[])}h.EMPTY=function(e){return e.closed=!0,e}(new h);const d="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class f extends h{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!e){this.destination=a;break}if("object"==typeof e){e instanceof f?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,n)}}[d](){return this}static create(e,t,n){const r=new f(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends f{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let i=this;r(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==a&&(i=Object.create(t),r(i.unsubscribe)&&this.add(i.unsubscribe.bind(i)),i.unsubscribe=this.unsubscribe.bind(this))),this._context=i,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):i(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;i(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;i(n)}}__tryOrSetError(e,t,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(i(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g="function"==typeof Symbol&&Symbol.observable||"@@observable";function y(e){return e}let _=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:r}=this,s=function(e,t,n){if(e){if(e instanceof f)return e;if(e[d])return e[d]()}return e||t||n?new f(e,t,n):new f(a)}(e,t,n);if(s.add(r?r.call(s,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),o.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:r}=e;if(t||r)return!1;e=n&&n instanceof f?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=b(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(s){n(s),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=b(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function b(e){if(e||(e=o.Promise||Promise),!e)throw new Error("no Promise impl found");return e}const v=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class w extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}class x extends f{constructor(e){super(e),this.destination=e}}let k=(()=>{class e extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[d](){return new x(this)}lift(e){const t=new T(this,this);return t.operator=e,t}next(e){if(this.closed)throw new v;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].next(e)}}error(e){if(this.closed)throw new v;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new v;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new v;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new v;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new w(this,e))}asObservable(){const e=new _;return e.source=this,e}}return e.create=(e,t)=>new T(e,t),e})();class T extends k{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}class C{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new E(e,this.project,this.thisArg))}}class E extends f{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const S=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()},A="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";const I=e=>{if(e&&"function"==typeof e[g])return s=e,e=>{const t=s[g]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((t=e)&&"number"==typeof t.length&&"function"!=typeof t)return S(e);var t,n,r,s;if((n=e)&&"function"!=typeof n.subscribe&&"function"==typeof n.then)return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i),t))(e);if(e&&"function"==typeof e[A])return r=e,e=>{const t=r[A]();for(;;){let r;try{r=t.next()}catch(n){return e.error(n),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(()=>{t.return&&t.return()}),e};{const t=c(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}};class O extends f{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class D extends f{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function R(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(R((n,r)=>{return(s=e(n,r),s instanceof _?s:new _(I(s))).pipe(function(e,t){return function(t){return t.lift(new C(e,void 0))}}((e,s)=>t(n,e,r,s)));var s},n)):("number"==typeof t&&(n=t),t=>t.lift(new M(e,n)))}class M{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new j(e,this.project,this.concurrent))}}class j extends D{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new O(this),n=this.destination;n.add(t);const r=function(e,t){if(t.closed)return;if(e instanceof _)return e.subscribe(t);let n;try{n=I(e)(t)}catch(r){t.error(r)}return n}(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function P(){return function(e){return e.lift(new N(e))}}class N{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new H(e,n),s=t.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class H extends f{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class F extends _{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new h,e.add(this.source.subscribe(new L(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.EMPTY)),e}refCount(){return P()(this)}}const V=(()=>{const e=F.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class L extends x{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}function Z(){return new k}function B(e){for(let t in e)if(e[t]===B)return t;throw Error("Could not find renamed property on target object.")}function z(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(z).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function $(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const U=B({__forward_ref__:B});function W(e){return e.__forward_ref__=W,e.toString=function(){return z(this())},e}function q(e){return"function"==typeof(t=e)&&t.hasOwnProperty(U)&&t.__forward_ref__===W?e():e;var t}class G extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function Q(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function Y(e,t){const n=t?` in ${t}`:"";throw new G("201",`No provider for ${Q(e)} found${n}`)}function K(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function J(e){return{providers:e.providers||[],imports:e.imports||[]}}function X(e){return ee(e,ne)||ee(e,se)}function ee(e,t){return e.hasOwnProperty(t)?e[t]:null}function te(e){return e&&(e.hasOwnProperty(re)||e.hasOwnProperty(oe))?e[re]:null}const ne=B({"\u0275prov":B}),re=B({"\u0275inj":B}),se=B({ngInjectableDef:B}),oe=B({ngInjectorDef:B});var ie=(()=>((ie=ie||{})[ie.Default=0]="Default",ie[ie.Host=1]="Host",ie[ie.Self=2]="Self",ie[ie.SkipSelf=4]="SkipSelf",ie[ie.Optional=8]="Optional",ie))();let ae;function le(e){const t=ae;return ae=e,t}function ce(e,t,n){const r=X(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ie.Optional?null:void 0!==t?t:void Y(z(e),"Injector")}function ue(e){return{toString:e}.toString()}var he=(()=>((he=he||{})[he.OnPush=0]="OnPush",he[he.Default=1]="Default",he))(),pe=(()=>((pe=pe||{})[pe.Emulated=0]="Emulated",pe[pe.None=2]="None",pe[pe.ShadowDom=3]="ShadowDom",pe))();const de="undefined"!=typeof globalThis&&globalThis,fe="undefined"!=typeof window&&window,me="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ge="undefined"!=typeof global&&global,ye=de||ge||fe||me,_e={},be=[],ve=B({"\u0275cmp":B}),we=B({"\u0275dir":B}),xe=B({"\u0275pipe":B}),ke=B({"\u0275mod":B}),Te=B({"\u0275loc":B}),Ce=B({"\u0275fac":B}),Ee=B({__NG_ELEMENT_ID__:B});let Se=0;function Ae(e){return ue(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===he.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||be,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||pe.Emulated,id:"c",styles:e.styles||be,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,s=e.features,o=e.pipes;return n.id+=Se++,n.inputs=Me(e.inputs,t),n.outputs=Me(e.outputs),s&&s.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ie):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Oe):null,n})}function Ie(e){return je(e)||function(e){return e[we]||null}(e)}function Oe(e){return function(e){return e[xe]||null}(e)}const De={};function Re(e){return ue(()=>{const t={type:e.type,bootstrap:e.bootstrap||be,declarations:e.declarations||be,imports:e.imports||be,exports:e.exports||be,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(De[e.id]=e.type),t})}function Me(e,t){if(null==e)return _e;const n={};for(const r in e)if(e.hasOwnProperty(r)){let s=e[r],o=s;Array.isArray(s)&&(o=s[1],s=s[0]),n[s]=r,t&&(t[s]=o)}return n}function je(e){return e[ve]||null}function Pe(e,t){const n=e[ke]||null;if(!n&&!0===t)throw new Error(`Type ${z(e)} does not have '\u0275mod' property.`);return n}const Ne=20,He=10;function Fe(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ve(e){return Array.isArray(e)&&!0===e[1]}function Le(e){return 0!=(8&e.flags)}function Ze(e){return null!==e.template}function Be(e,t){return e.hasOwnProperty(Ce)?e[Ce]:null}class ze{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function $e(){const e=We(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===_e)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ue(e,t,n,r){const s=We(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:_e,current:null}),o=s.current||(s.current={}),i=s.previous,a=this.declaredInputs[n],l=i[a];o[a]=new ze(l&&l.currentValue,t,i===_e),e[r]=t}function We(e){return e.__ngSimpleChanges__||null}let qe;function Ge(e){return!!e.listen}const Qe={createRenderer:(e,t)=>void 0!==qe?qe:"undefined"!=typeof document?document:void 0};function Ye(e){for(;Array.isArray(e);)e=e[0];return e}function Ke(e,t){return Ye(t[e.index])}function Je(e,t){const n=t[e];return Fe(n)?n:n[0]}function Xe(e){return 128==(128&e[2])}function et(e,t){return null==t?null:e[t]}function tt(e){e[18]=0}function nt(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const rt={lFrame:vt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function st(){return rt.bindingsEnabled}function ot(){return rt.lFrame.lView}function it(){return rt.lFrame.tView}function at(){let e=lt();for(;null!==e&&64===e.type;)e=e.parent;return e}function lt(){return rt.lFrame.currentTNode}function ct(e,t){const n=rt.lFrame;n.currentTNode=e,n.isParent=t}function ut(){return rt.lFrame.isParent}function ht(){return rt.isInCheckNoChangesMode}function pt(e){rt.isInCheckNoChangesMode=e}function dt(e,t){const n=rt.lFrame;n.bindingIndex=n.bindingRootIndex=e,ft(t)}function ft(e){rt.lFrame.currentDirectiveIndex=e}function mt(e){rt.lFrame.currentQueryIndex=e}function gt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function yt(e,t,n){if(n&ie.SkipSelf){let r=t,s=e;for(;r=r.parent,!(null!==r||n&ie.Host||(r=gt(s),null===r)||(s=s[15],10&r.type)););if(null===r)return!1;t=r,e=s}const r=rt.lFrame=bt();return r.currentTNode=t,r.lView=e,!0}function _t(e){const t=bt(),n=e[1];rt.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function bt(){const e=rt.lFrame,t=null===e?null:e.child;return null===t?vt(e):t}function vt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function wt(){const e=rt.lFrame;return rt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const xt=wt;function kt(){const e=wt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Tt(e){rt.lFrame.selectedIndex=e}function Ct(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:s,ngAfterViewInit:o,ngAfterViewChecked:i,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),s&&((e.contentHooks||(e.contentHooks=[])).push(n,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,s)),o&&(e.viewHooks||(e.viewHooks=[])).push(-n,o),i&&((e.viewHooks||(e.viewHooks=[])).push(n,i),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Et(e,t,n){It(e,t,3,n)}function St(e,t,n,r){(3&e[2])===n&&It(e,t,n,r)}function At(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function It(e,t,n,r){const s=null!=r?r:-1,o=t.length-1;let i=0;for(let a=void 0!==r?65535&e[18]:0;a<o;a++)if("number"==typeof t[a+1]){if(i=t[a],null!=r&&i>=r)break}else t[a]<0&&(e[18]+=65536),(i<s||-1==s)&&(Ot(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Ot(e,t,n,r){const s=n[r]<0,o=n[r+1],i=e[s?-n[r]:n[r]];if(s){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(i)}finally{}}}else try{o.call(i)}finally{}}const Dt=-1;class Rt{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Mt(e,t,n){const r=Ge(e);let s=0;for(;s<n.length;){const o=n[s];if("number"==typeof o){if(0!==o)break;s++;const i=n[s++],a=n[s++],l=n[s++];r?e.setAttribute(t,a,l,i):t.setAttributeNS(i,a,l)}else{const i=o,a=n[++s];64===i.charCodeAt(0)?r&&e.setProperty(t,i,a):r?e.setAttribute(t,i,a):t.setAttribute(i,a),s++}}return s}function jt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||Pt(e,n,s,null,-1===n||2===n?t[++r]:null)}}return e}function Pt(e,t,n,r,s){let o=0,i=e.length;if(-1===t)i=-1;else for(;o<e.length;){const n=e[o++];if("number"==typeof n){if(n===t){i=-1;break}if(n>t){i=o-1;break}}}for(;o<e.length;){const t=e[o];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==s&&(e[o+1]=s));if(r===e[o+1])return void(e[o+2]=s)}o++,null!==r&&o++,null!==s&&o++}-1!==i&&(e.splice(i,0,t),o=i+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==s&&e.splice(o++,0,s)}function Nt(e){return 32767&e}function Ht(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Ft=!0;function Vt(e){const t=Ft;return Ft=e,t}let Lt=0;function Zt(e,t){const n=zt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Bt(r.data,e),Bt(t,null),Bt(r.blueprint,null));const s=$t(e,t),o=e.injectorIndex;if(s!==Dt){const e=Nt(s),n=Ht(s,t),r=n[1].data;for(let s=0;s<8;s++)t[o+s]=n[e+s]|r[e+s]}return t[o+8]=s,o}function Bt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function $t(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){const e=s[1],t=e.type;if(r=2===t?e.declTNode:1===t?s[6]:null,null===r)return Dt;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Dt}function Ut(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ee)&&(r=n[Ee]),null==r&&(r=n[Ee]=Lt++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function Wt(e,t,n){if(n&ie.Optional)return e;Y(t,"NodeInjector")}function qt(e,t,n,r){if(n&ie.Optional&&void 0===r&&(r=null),0==(n&(ie.Self|ie.Host))){const s=e[9],o=le(void 0);try{return s?s.get(t,r,n&ie.Optional):ce(t,r,n&ie.Optional)}finally{le(o)}}return Wt(r,t,n)}const Gt={};function Qt(){return new en(at(),ot())}function Yt(e,t,n,r,s,o){const i=t[1],a=i.data[e+8],l=function(e,t,n,r,s){const o=e.providerIndexes,i=t.data,a=1048575&o,l=e.directiveStart,c=o>>20,u=s?a+c:e.directiveEnd;for(let h=r?a:a+c;h<u;h++){const e=i[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(s){const e=i[l];if(e&&Ze(e)&&e.type===n)return l}return null}(a,i,n,null==r?function(e){return 2==(2&e.flags)}(a)&&Ft:r!=i&&0!=(3&a.type),s&ie.Host&&o===a);return null!==l?Kt(t,i,l,a):Gt}function Kt(e,t,n,r){let s=e[n];const o=t.data;if(s instanceof Rt){const i=s;i.resolving&&function(e,t){throw new G("200",`Circular dependency in DI detected for ${e}`)}(Q(o[n]));const a=Vt(i.canSeeViewProviders);i.resolving=!0;const l=i.injectImpl?le(i.injectImpl):null;yt(e,r,ie.Default);try{s=e[n]=i.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:o}=t.type.prototype;if(r){const r=((i=t).type.prototype.ngOnChanges&&(i.setInput=Ue),$e);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}var i;s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,s),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==l&&le(l),Vt(a),i.resolving=!1,xt()}}return s}function Jt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Xt(e,t){return!(e&ie.Self||e&ie.Host&&t)}class en{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return function(e,t,n,r=ie.Default,s){if(null!==e){const o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Ee)?e[Ee]:void 0;return"number"==typeof t?t>=0?255&t:Qt:t}(n);if("function"==typeof o){if(!yt(t,e,r))return r&ie.Host?Wt(s,n,r):qt(t,n,r,s);try{const e=o(r);if(null!=e||r&ie.Optional)return e;Y(n)}finally{xt()}}else if("number"==typeof o){let s=null,i=zt(e,t),a=Dt,l=r&ie.Host?t[16][6]:null;for((-1===i||r&ie.SkipSelf)&&(a=-1===i?$t(e,t):t[i+8],a!==Dt&&Xt(r,!1)?(s=t[1],i=Nt(a),t=Ht(a,t)):i=-1);-1!==i;){const e=t[1];if(Jt(o,i,e.data)){const e=Yt(i,t,n,s,r,l);if(e!==Gt)return e}a=t[i+8],a!==Dt&&Xt(r,t[1].data[i+8]===l)&&Jt(o,i,t)?(s=e,i=Nt(a),t=Ht(a,t)):i=-1}}}return qt(t,n,r,s)}(this._tNode,this._lView,e,void 0,t)}}const tn="__parameters__";function nn(e,t,n){return ue(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function s(...e){if(this instanceof s)return r.apply(this,e),this;const t=new s(...e);return n.annotation=t,n;function n(e,n,r){const s=e.hasOwnProperty(tn)?e[tn]:Object.defineProperty(e,tn,{value:[]})[tn];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(t),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}class rn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}function sn(e,t){e.forEach(e=>Array.isArray(e)?sn(e,t):t(e))}function on(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const an={},ln=/\n/gm,cn="__source",un=B({provide:String,useValue:B});let hn;function pn(e){const t=hn;return hn=e,t}function dn(e,t=ie.Default){if(void 0===hn)throw new Error("inject() must be called from an injection context");return null===hn?ce(e,void 0,t):hn.get(e,t&ie.Optional?null:void 0,t)}function fn(e,t=ie.Default){return(ae||dn)(q(e),t)}function mn(e){const t=[];for(let n=0;n<e.length;n++){const r=q(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=ie.Default;for(let t=0;t<r.length;t++){const s=r[t],o=s.__NG_DI_FLAG__;"number"==typeof o?-1===o?e=s.token:n|=o:e=s}t.push(fn(e,n))}else t.push(fn(r))}return t}function gn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const yn=gn(nn("Inject",e=>({token:e})),-1),_n=gn(nn("Optional"),8),bn=gn(nn("SkipSelf"),4);function vn(e,t){e.__ngContext__=t}function wn(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function xn(e){return e.ngOriginalError}function kn(e,...t){e.error(...t)}class Tn{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||kn}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(xn(e)):null}_findOriginalError(e){let t=e&&xn(e);for(;t&&xn(t);)t=xn(t);return t||null}}const Cn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ye))();function En(e){return e instanceof Function?e():e}var Sn=(()=>((Sn=Sn||{})[Sn.Important=1]="Important",Sn[Sn.DashCase=2]="DashCase",Sn))();function An(e,t){return(void 0)(e,t)}function In(e){const t=e[3];return Ve(t)?t[3]:t}function On(e){return Rn(e[13])}function Dn(e){return Rn(e[4])}function Rn(e){for(;null!==e&&!Ve(e);)e=e[4];return e}function Mn(e,t,n,r,s){if(null!=r){let o,i=!1;Ve(r)?o=r:Fe(r)&&(i=!0,r=r[0]);const a=Ye(r);0===e&&null!==n?null==s?Fn(t,n,a):Hn(t,n,a,s||null,!0):1===e&&null!==n?Hn(t,n,a,s||null,!0):2===e?function(e,t,n){const r=function(e,t){return Ge(e)?e.parentNode(t):t.parentNode}(e,t);r&&function(e,t,n,r){Ge(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,i):3===e&&t.destroyNode(a),null!=o&&function(e,t,n,r,s){const o=n[7];o!==Ye(n)&&Mn(t,e,r,o,s);for(let i=He;i<n.length;i++){const s=n[i];zn(s[1],s,e,t,r,o)}}(t,e,o,n,s)}}function jn(e,t,n){return Ge(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Pn(e,t){const n=e[9],r=n.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,nt(s,-1)),n.splice(r,1)}function Nn(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Rt)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],s=t[n+1];try{s.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let s=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const e=n[o+1],i="function"==typeof e?e(t):Ye(t[e]),a=r[s=n[o+2]],l=n[o+3];"boolean"==typeof l?i.removeEventListener(n[o],a,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),o+=2}else{const e=r[s=n[o+1]];n[o].call(e)}if(null!==r){for(let e=s+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ge(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&Ve(t[3])){n!==t[3]&&Pn(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Hn(e,t,n,r,s){Ge(e)?e.insertBefore(t,n,r,s):t.insertBefore(n,r,s)}function Fn(e,t,n){Ge(e)?e.appendChild(t,n):t.appendChild(n)}function Vn(e,t,n,r,s){null!==r?Hn(e,t,n,r,s):Fn(e,t,n)}function Ln(e,t,n,r){const s=function(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===pe.None||t===pe.Emulated)return null}return Ke(r,n)}(e,t.parent,n)}(e,r,t),o=t[11],i=function(e,t,n){return function(e,t,n){return 40&e.type?Ke(e,n):null}(e,0,n)}(r.parent||t[6],0,t);if(null!=s)if(Array.isArray(n))for(let a=0;a<n.length;a++)Vn(o,s,n[a],i,!1);else Vn(o,s,n,i,!1)}function Zn(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Bn(e,t,n,r,s,o,i){for(;null!=n;){const a=r[n.index],l=n.type;if(i&&0===t&&(a&&vn(Ye(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Bn(e,t,n.child,r,s,o,!1),Mn(t,e,s,a,o);else if(32&l){const i=An(n,r);let l;for(;l=i();)Mn(t,e,s,l,o);Mn(t,e,s,a,o)}else 16&l?$n(e,t,r,n,s,o):Mn(t,e,s,a,o);n=i?n.projectionNext:n.next}}function zn(e,t,n,r,s,o){Bn(n,r,e.firstChild,t,s,o,!1)}function $n(e,t,n,r,s,o){const i=n[16],a=i[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)Mn(t,e,s,a[l],o);else Bn(e,t,a,i[3],s,o,!0)}function Un(e,t,n){Ge(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Wn(e,t,n){Ge(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function qn(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const n=t.length;if(s+n===r||e.charCodeAt(s+n)<=32)return s}n=s+1}}const Gn="ng-template";function Qn(e,t,n){let r=0;for(;r<e.length;){let s=e[r++];if(n&&"class"===s){if(s=e[r],-1!==qn(s.toLowerCase(),t,0))return!0}else if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function Yn(e){return 4===e.type&&e.value!==Gn}function Kn(e,t,n){return t===(4!==e.type||n?e.value:Gn)}function Jn(e,t,n){let r=4;const s=e.attrs||[],o=function(e){for(let n=0;n<e.length;n++)if(3===(t=e[n])||4===t||6===t)return n;var t;return e.length}(s);let i=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!i)if(4&r){if(r=2|1&r,""!==l&&!Kn(e,l,n)||""===l&&1===t.length){if(Xn(r))return!1;i=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!Qn(e.attrs,c,n)){if(Xn(r))return!1;i=!0}continue}const u=er(8&r?"class":l,s,Yn(e),n);if(-1===u){if(Xn(r))return!1;i=!0;continue}if(""!==c){let e;e=u>o?"":s[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==qn(t,c,0)||2&r&&c!==e){if(Xn(r))return!1;i=!0}}}}else{if(!i&&!Xn(r)&&!Xn(l))return!1;if(i&&Xn(l))continue;i=!1,r=l|1&r}}return Xn(r)||i}function Xn(e){return 0==(1&e)}function er(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let n=!1;for(;s<t.length;){const r=t[s];if(r===e)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++s];for(;"string"==typeof e;)e=t[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function tr(e,t,n=!1){for(let r=0;r<t.length;r++)if(Jn(e,t[r],n))return!0;return!1}function nr(e,t){return e?":not("+t.trim()+")":t}function rr(e){let t=e[0],n=1,r=2,s="",o=!1;for(;n<e.length;){let i=e[n];if("string"==typeof i)if(2&r){const t=e[++n];s+="["+i+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?s+="."+i:4&r&&(s+=" "+i);else""===s||Xn(i)||(t+=nr(o,s),s=""),r=i,o=o||!Xn(r);n++}return""!==s&&(t+=nr(o,s)),t}const sr={};function or(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],o=n[r+1];if(-1!==o){const n=e.data[o];mt(s),n.contentQueries(2,t[o],o)}}}function ir(e,t,n,r,s,o,i,a,l,c){const u=t.blueprint.slice();return u[0]=s,u[2]=140|r,tt(u),u[3]=u[15]=e,u[8]=n,u[10]=i||e&&e[10],u[11]=a||e&&e[11],u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=o,u[16]=2==t.type?e[16]:u,u}function ar(e,t,n,r,s){let o=e.data[t];if(null===o)o=function(e,t,n,r,s){const o=lt(),i=ut(),a=e.data[t]=function(e,t,n,r,s,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,i?o:o&&o.parent,n,t,r,s);return null===e.firstChild&&(e.firstChild=a),null!==o&&(i?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(e,t,n,r,s),rt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=s;const e=function(){const e=rt.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===e?-1:e.injectorIndex}return ct(o,!0),o}function lr(e,t,n,r){if(0===n)return-1;const s=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function cr(e,t,n){_t(t);try{const r=e.viewQuery;null!==r&&Dr(1,r,n);const s=e.template;null!==s&&pr(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&or(e,t),e.staticViewQueries&&Dr(2,e.viewQuery,n);const o=e.components;null!==o&&function(e,t){for(let n=0;n<t.length;n++)Sr(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,kt()}}function ur(e,t,n,r){const s=t[2];if(256==(256&s))return;_t(t);const o=ht();try{tt(t),rt.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&pr(e,t,n,2,r);const i=3==(3&s);if(!o)if(i){const n=e.preOrderCheckHooks;null!==n&&Et(t,n,null)}else{const n=e.preOrderHooks;null!==n&&St(t,n,0,null),At(t,0)}if(function(e){for(let t=On(e);null!==t;t=Dn(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&nt(r,1),n[2]|=1024}}}(t),function(e){for(let t=On(e);null!==t;t=Dn(t))for(let e=He;e<t.length;e++){const n=t[e],r=n[1];Xe(n)&&ur(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&or(e,t),!o)if(i){const n=e.contentCheckHooks;null!==n&&Et(t,n)}else{const n=e.contentHooks;null!==n&&St(t,n,1),At(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)Tt(~r);else{const s=r,o=n[++e],i=n[++e];dt(o,s),i(2,t[s])}}}finally{Tt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Cr(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Dr(2,l,r),!o)if(i){const n=e.viewCheckHooks;null!==n&&Et(t,n)}else{const n=e.viewHooks;null!==n&&St(t,n,2),At(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,nt(t[3],-1))}finally{kt()}}function hr(e,t,n,r){const s=t[10],o=!ht(),i=4==(4&t[2]);try{o&&!i&&s.begin&&s.begin(),i&&cr(e,t,r),ur(e,t,n,r)}finally{o&&!i&&s.end&&s.end()}}function pr(e,t,n,r,s){const o=rt.lFrame.selectedIndex,i=2&r;try{Tt(-1),i&&t.length>Ne&&function(e,t,n,r){if(!r)if(3==(3&t[2])){const n=e.preOrderCheckHooks;null!==n&&Et(t,n,20)}else{const n=e.preOrderHooks;null!==n&&St(t,n,0,20)}Tt(20)}(e,t,0,ht()),n(r,s)}finally{Tt(o)}}function dr(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=fr(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function fr(e,t,n,r,s,o,i,a,l,c){const u=Ne+r,h=u+s,p=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:sr);return n}(u,h),d="function"==typeof c?c():c;return p[1]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof i?i():i,firstChild:null,schemas:l,consts:d,incompleteFirstPass:!1}}function mr(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,s):n[r]=[t,s]}return n}function gr(e,t,n,r,s,o){const i=o.hostBindings;if(i){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const o=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,s,i)}}function yr(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function _r(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function br(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ze(t)&&(n[""]=e)}}function vr(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function wr(e,t,n,r,s){e.data[r]=s;const o=s.factory||(s.factory=Be(s.type)),i=new Rt(o,Ze(s),null);e.blueprint[r]=i,n[r]=i,gr(e,t,0,r,lr(e,n,s.hostVars,sr),s)}function xr(e,t,n){const r=Ke(t,e),s=dr(n),o=e[10],i=Ar(e,ir(e,s,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=i}function kr(e,t,n,r,s,o){const i=o[t];if(null!==i){const e=r.setInput;for(let t=0;t<i.length;){const s=i[t++],o=i[t++],a=i[t++];null!==e?r.setInput(n,a,s,o):n[o]=a}}}function Tr(e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,e[s],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Cr(e,t){const n=Je(t,e);if(Xe(n)){const e=n[1];80&n[2]?ur(e,n,e.template,n[8]):n[5]>0&&Er(n)}}function Er(e){for(let n=On(e);null!==n;n=Dn(n))for(let e=He;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];ur(e,t,e.template,t[8])}else t[5]>0&&Er(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Je(t[n],e);Xe(r)&&r[5]>0&&Er(r)}}function Sr(e,t){const n=Je(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),cr(r,n,n[8])}function Ar(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Ir(e,t,n){const r=t[10];r.begin&&r.begin();try{ur(e,t,e.template,n)}catch(s){throw function(e,t){const n=e[9],r=n?n.get(Tn,null):null;r&&r.handleError(t)}(t,s),s}finally{r.end&&r.end()}}function Or(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=wn(n),s=r[1];hr(s,r,s.template,n)}}(e[8])}function Dr(e,t,n){mt(0),t(e,n)}const Rr=(()=>Promise.resolve(null))();function Mr(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,o=0;if(null!==t)for(let i=0;i<t.length;i++){const e=t[i];"number"==typeof e?o=e:1==o?s=$(s,e):2==o&&(r=$(r,e+": "+t[++i]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}const jr=new rn("INJECTOR",-1);class Pr{get(e,t=an){if(t===an){const t=new Error(`NullInjectorError: No provider for ${z(e)}!`);throw t.name="NullInjectorError",t}return t}}const Nr=new rn("Set Injector scope."),Hr={},Fr={};let Vr;function Lr(){return void 0===Vr&&(Vr=new Pr),Vr}function Zr(e,t=null,n=null,r){return new Br(e,n,t||Lr(),r)}class Br{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&sn(t,n=>this.processProvider(n,e,t)),sn([e],e=>this.processInjectorType(e,[],s)),this.records.set(jr,$r(void 0,this));const o=this.records.get(Nr);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof e?null:z(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=an,n=ie.Default){this.assertNotDestroyed();const r=pn(this),s=le(void 0);try{if(!(n&ie.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(o=e)||"object"==typeof o&&o instanceof rn)&&X(e);t=n&&this.injectableDefInScope(n)?$r(zr(e),Hr):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&ie.Self?Lr():this.parent).get(e,t=n&ie.Optional&&t===an?null:t)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(z(e)),r)throw i;return function(e,t,n,r){const s=e.ngTempTokenPath;throw t[cn]&&s.unshift(t[cn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let s=z(t);if(Array.isArray(t))s=t.map(z).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):z(r)))}s=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(ln,"\n  ")}`}("\n"+e.message,s,n,r),e.ngTokenPath=s,e.ngTempTokenPath=null,e}(i,e,"R3InjectorError",this.source)}throw i}finally{le(s),pn(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(z(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=q(e)))return!1;let r=te(e);const s=null==r&&e.ngModule||void 0,o=void 0===s?e:s,i=-1!==n.indexOf(o);if(void 0!==s&&(r=te(s)),null==r)return!1;if(null!=r.imports&&!i){let e;n.push(o);try{sn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];sn(r,e=>this.processProvider(e,n,r||be))}}this.injectorDefTypes.add(o);const a=Be(o)||(()=>new o);this.records.set(o,$r(a,Hr));const l=r.providers;if(null!=l&&!i){const t=e;sn(l,e=>this.processProvider(e,t,l))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,n){let r=Wr(e=q(e))?e:q(e&&e.provide);const s=function(e,t,n){return Ur(e)?$r(void 0,e.useValue):$r(function(e,t,n){let r;if(Wr(e)){const t=q(e);return Be(t)||zr(t)}if(Ur(e))r=()=>q(e.useValue);else if((s=e)&&s.useFactory)r=()=>e.useFactory(...mn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>fn(q(e.useExisting));else{const t=q(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Be(t)||zr(t);r=()=>new t(...mn(e.deps))}var s;return r}(e),Hr)}(e);if(Wr(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=$r(void 0,Hr,!0),t.factory=()=>mn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,s)}hydrate(e,t){var n;return t.value===Hr&&(t.value=Fr,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=q(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function zr(e){const t=X(e),n=null!==t?t.factory:Be(e);if(null!==n)return n;if(e instanceof rn)throw new Error(`Token ${z(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=function(e,t){const n=[];for(let r=0;r<e;r++)n.push("?");return n}(t);throw new Error(`Can't resolve all parameters for ${z(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[ne]||e[se]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function $r(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ur(e){return null!==e&&"object"==typeof e&&un in e}function Wr(e){return"function"==typeof e}const qr=function(e,t,n){return function(e,t=null,n=null,r){const s=Zr(e,t,n,r);return s._resolveInjectorDefTypes(),s}({name:n},t,e,n)};class Gr{static create(e,t){return Array.isArray(e)?qr(e,t,""):qr(e.providers,e.parent,e.name||"")}}function Qr(e,t){Ct(wn(e)[1],at())}Gr.THROW_IF_NOT_FOUND=an,Gr.NULL=new Pr,Gr.\u0275prov=K({token:Gr,providedIn:"any",factory:()=>fn(jr)}),Gr.__NG_ELEMENT_ID__=-1;let Yr=null;function Kr(){if(!Yr){const e=ye.Symbol;if(e&&e.iterator)Yr=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Yr=n)}}}return Yr}function Jr(e){return!!Xr(e)&&(Array.isArray(e)||!(e instanceof Map)&&Kr()in e)}function Xr(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function es(e,t,n,r,s){const o=s?"class":"style";!function(e,t,n,r,s){for(let o=0;o<n.length;){const i=n[o++],a=n[o++],l=t[i],c=e.data[i];null!==c.setInput?c.setInput(l,s,r,a):l[a]=s}}(e,n,t.inputs[o],o,r)}function ts(e,t,n,r){const s=ot(),o=it(),i=Ne+e,a=s[11],l=s[i]=jn(a,t,rt.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,s,o,i){const a=t.consts,l=ar(t,e,2,s,et(a,o));return function(e,t,n,r){let s=!1;if(st()){const o=function(e,t,n){const r=e.directiveRegistry;let s=null;if(r)for(let o=0;o<r.length;o++){const i=r[o];tr(n,i.selectors,!1)&&(s||(s=[]),Ut(Zt(n,t),e,i.type),Ze(i)?(_r(e,n),s.unshift(i)):s.push(i))}return s}(e,t,n),i=null===r?null:{"":-1};if(null!==o){s=!0,vr(n,e.data.length,o.length);for(let e=0;e<o.length;e++){const t=o[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=lr(e,t,o.length,null);for(let s=0;s<o.length;s++){const c=o[s];n.mergedAttrs=jt(n.mergedAttrs,c.hostAttrs),wr(e,n,t,l,c),br(l,c,i),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,s=t.attrs,o=[];let i=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,c=null===s||Yn(t)?null:Tr(n,s);o.push(c),i=mr(n,l,i),a=mr(e.outputs,l,a)}null!==i&&(i.hasOwnProperty("class")&&(t.flags|=16),i.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=i,t.outputs=a}(e,n)}i&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const s=n[t[e+1]];if(null==s)throw new G("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],s)}}}(n,r,i)}n.mergedAttrs=jt(n.mergedAttrs,n.attrs)}(t,n,l,et(a,i)),null!==l.attrs&&Mr(l,l.attrs,!1),null!==l.mergedAttrs&&Mr(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(i,o,s,0,t,n,r):o.data[i];ct(c,!0);const u=c.mergedAttrs;null!==u&&Mt(a,l,u);const h=c.classes;null!==h&&Wn(a,l,h);const p=c.styles;null!==p&&Un(a,l,p),64!=(64&c.flags)&&Ln(o,s,l,c),0===rt.lFrame.elementDepthCount&&vn(l,s),rt.lFrame.elementDepthCount++,function(e){return 1==(1&e.flags)}(c)&&(function(e,t,n){st()&&(function(e,t,n,r){const s=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Zt(n,t),vn(r,t);const i=n.initialInputs;for(let a=s;a<o;a++){const r=e.data[a],o=Ze(r);o&&xr(t,n,r);const l=Kt(t,e,a,n);vn(l,t),null!==i&&kr(0,a-s,l,r,0,i),o&&(Je(n.index,t)[8]=l)}}(e,t,n,Ke(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,s=n.directiveEnd,o=n.index,i=rt.lFrame.currentDirectiveIndex;try{Tt(o);for(let n=r;n<s;n++){const r=e.data[n],s=t[n];ft(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||yr(r,s)}}finally{Tt(-1),ft(i)}}(e,t,n))}(o,s,c),function(e,t,n){if(Le(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const t=e.data[s];t.contentQueries&&t.contentQueries(1,n[s],s)}}}(o,c,s)),null!==r&&function(e,t,n=Ke){const r=t.localNames;if(null!==r){let s=t.index+1;for(let o=0;o<r.length;o+=2){const i=r[o+1],a=-1===i?n(t,e):e[i];e[s++]=a}}}(s,c)}function ns(){let e=at();ut()?rt.lFrame.isParent=!1:(e=e.parent,ct(e,!1));const t=e;rt.lFrame.elementDepthCount--;const n=it();n.firstCreatePass&&(Ct(n,e),Le(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&es(n,t,ot(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&es(n,t,ot(),t.stylesWithoutHost,!1)}function rs(e,t,n,r){ts(e,t,n,r),ns()}function ss(e){return!!e&&"function"==typeof e.then}function os(e,t=""){const n=ot(),r=it(),s=e+Ne,o=r.firstCreatePass?ar(r,s,1,t,null):r.data[s],i=n[s]=function(e,t){return Ge(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Ln(r,n,i,o),ct(o,!1)}const is=void 0;var as=["en",[["a","p"],["AM","PM"],is],[["AM","PM"],is,is],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],is,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],is,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",is,"{1} 'at' {0}",is],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ls={};function cs(e){return e in ls||(ls[e]=ye.ng&&ye.ng.common&&ye.ng.common.locales&&ye.ng.common.locales[e]),ls[e]}var us=(()=>((us=us||{})[us.LocaleId=0]="LocaleId",us[us.DayPeriodsFormat=1]="DayPeriodsFormat",us[us.DayPeriodsStandalone=2]="DayPeriodsStandalone",us[us.DaysFormat=3]="DaysFormat",us[us.DaysStandalone=4]="DaysStandalone",us[us.MonthsFormat=5]="MonthsFormat",us[us.MonthsStandalone=6]="MonthsStandalone",us[us.Eras=7]="Eras",us[us.FirstDayOfWeek=8]="FirstDayOfWeek",us[us.WeekendRange=9]="WeekendRange",us[us.DateFormat=10]="DateFormat",us[us.TimeFormat=11]="TimeFormat",us[us.DateTimeFormat=12]="DateTimeFormat",us[us.NumberSymbols=13]="NumberSymbols",us[us.NumberFormats=14]="NumberFormats",us[us.CurrencyCode=15]="CurrencyCode",us[us.CurrencySymbol=16]="CurrencySymbol",us[us.CurrencyName=17]="CurrencyName",us[us.Currencies=18]="Currencies",us[us.Directionality=19]="Directionality",us[us.PluralCase=20]="PluralCase",us[us.ExtraData=21]="ExtraData",us))();const hs="en-US";let ps=hs;function ds(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(ps=e.toLowerCase().replace(/_/g,"-"))}class fs{}class ms{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${z(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class gs{}function ys(...e){}function _s(e,t){return new vs(Ke(e,t))}gs.NULL=new ms;const bs=function(){return _s(at(),ot())};let vs=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=bs,e})();class ws{}let xs=(()=>{class e{}return e.\u0275prov=K({token:e,providedIn:"root",factory:()=>null}),e})();class ks{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ts=new ks("12.2.3");class Cs{constructor(){}supports(e){return Jr(e)}create(e){return new Ss(e)}}const Es=(e,t)=>t;class Ss{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Es}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<Ds(n,r,s)?t:n,i=Ds(o,r,s),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const e=i-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<s.length?s[n]:s[n]=0,o=r+n;t<=o&&o<e&&(s[n]=r+1)}s[o.previousIndex]=t-e}}i!==a&&e(o,i,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Jr(e))throw new Error(`Error trying to diff '${z(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,s=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==s&&Object.is(s.trackById,r)?(o&&(s=this._verifyReinsertion(s,n,r,t)),Object.is(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,t),o=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Kr()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==s&&Object.is(s.trackById,r)?(o&&(s=this._verifyReinsertion(s,e,r,t)),Object.is(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,r,t),o=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new As(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Os),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Os),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class As{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Is{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Os{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Is,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ds(e,t,n){const r=e.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+t+s}class Rs{constructor(){}supports(e){return e instanceof Map||Xr(e)}create(){return new Ms}}class Ms{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Xr(e)))throw new Error(`Error trying to diff '${z(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new js(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class js{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ps(){return new Ns([new Cs])}let Ns=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ps()),deps:[[e,new bn,new _n]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=K({token:e,providedIn:"root",factory:Ps}),e})();function Hs(){return new Fs([new Rs])}let Fs=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Hs()),deps:[[e,new bn,new _n]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=K({token:e,providedIn:"root",factory:Hs}),e})();function Vs(e,t,n,r,s=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(Ye(o)),Ve(o))for(let e=He;e<o.length;e++){const t=o[e],n=t[1].firstChild;null!==n&&Vs(t[1],t,n,r)}const i=n.type;if(8&i)Vs(e,t,n.child,r);else if(32&i){const e=An(n,t);let s;for(;s=e();)r.push(s)}else if(16&i){const e=Zn(t,n);if(Array.isArray(e))r.push(...e);else{const n=In(t[16]);Vs(n[1],n,e,r,!0)}}n=s?n.projectionNext:n.next}return r}class Ls extends class{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Vs(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ve(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(function(e,t){if(e.length<=He)return;const n=He+t,r=e[n];if(r){const o=r[17];null!==o&&o!==e&&Pn(o,r),t>0&&(e[n-1][4]=r[4]);const i=on(e,He+t);zn(r[1],s=r,s[11],2,null,null),s[0]=null,s[6]=null;const a=i[19];null!==a&&a.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}var s}(e,n),on(t,n))}this._attachedToViewContainer=!1}!function(e,t){if(!(256&t[2])){const n=t[11];Ge(n)&&n.destroyNode&&zn(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Nn(e[1],e);for(;t;){let n=null;if(Fe(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)Fe(t)&&Nn(t[1],t),t=t[3];null===t&&(t=e),Fe(t)&&Nn(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}onDestroy(e){!function(e,t,n,r){const s=(o=t)[7]||(o[7]=[]);var o;s.push(r)}(0,this._lView,0,e)}markForCheck(){!function(e){for(;e;){e[2]|=64;const t=In(e);if(0!=(512&e[2])&&!t)return e;e=t}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ir(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){pt(!0);try{Ir(e,t,n)}finally{pt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,zn(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}{constructor(e){super(e),this._view=e}detectChanges(){Or(this._view)}checkNoChanges(){!function(e){pt(!0);try{Or(e)}finally{pt(!1)}}(this._view)}get context(){return null}}const Zs=[new Rs],Bs=new Ns([new Cs]),zs=new Fs(Zs);class $s{}const Us={};class Ws extends gs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=je(e);return new Qs(t,this.ngModule)}}function qs(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Gs=new rn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Cn});class Qs extends fs{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(rr).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return qs(this.componentDef.inputs)}get outputs(){return qs(this.componentDef.outputs)}create(e,t,n,r){const s=(r=r||this.ngModule)?function(e,t){return{get:(n,r,s)=>{const o=e.get(n,Us,s);return o!==Us||r===Us?o:t.get(n,r,s)}}}(e,r.injector):e,o=s.get(ws,Qe),i=s.get(xs,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(e,t,n){if(Ge(e))return e.selectRootElement(t,n===pe.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):jn(o.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Cn,clean:Rr,playerHandler:null,flags:0},p=fr(0,null,null,1,0,null,null,null,null,null),d=ir(null,p,h,u,null,null,o,a,i,s);let f,m;_t(d);try{const e=function(e,t,n,r,s,o){const i=n[1];n[20]=e;const a=ar(i,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(Mr(a,l,!0),null!==e&&(Mt(s,e,l),null!==a.classes&&Wn(s,e,a.classes),null!==a.styles&&Un(s,e,a.styles)));const c=r.createRenderer(e,t),u=ir(n,dr(t),null,t.onPush?64:16,n[20],a,r,c,null,null);return i.firstCreatePass&&(Ut(Zt(a,n),i,t.type),_r(i,a),vr(a,n.length,1)),Ar(n,u),n[20]=u}(c,this.componentDef,d,o,a);if(c)if(n)Mt(a,c,["ng-version",Ts.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===s?""!==o&&t.push(o,e[++r]):8===s&&n.push(o);else{if(!Xn(s))break;s=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Mt(a,c,e),t&&t.length>0&&Wn(a,c,t.join(" "))}if(m=p.data[20],void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,s){const o=n[1],i=function(e,t,n){const r=at();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),wr(e,r,t,lr(e,t,1,null),n));const s=Kt(t,e,r.directiveStart,r);vn(s,t);const o=Ke(r,t);return o&&vn(o,t),s}(o,n,t);if(r.components.push(i),e[8]=i,s&&s.forEach(e=>e(i,t)),t.contentQueries){const e=at();t.contentQueries(1,i,e.directiveStart)}const a=at();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Tt(a.index),gr(n[1],a,0,a.directiveStart,a.directiveEnd,t),yr(t,i)),i}(e,this.componentDef,d,h,[Qr]),cr(p,d,null)}finally{kt()}return new Ys(this.componentType,f,_s(m,d),d,m)}}class Ys extends class{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Ls(r),this.componentType=e}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Ks=new Map;class Js extends $s{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ws(this);const n=Pe(e),r=e[Te]||null;r&&ds(r),this._bootstrapComponents=En(n.bootstrap),this._r3Injector=Zr(e,t,[{provide:$s,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],z(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Gr.THROW_IF_NOT_FOUND,n=ie.Default){return e===Gr||e===$s||e===jr?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xs extends class{}{constructor(e){super(),this.moduleType=e,null!==Pe(e)&&function(e){const t=new Set;!function e(n){const r=Pe(n,!0),s=r.id;null!==s&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${z(t)} vs ${z(t.name)}`)}(s,Ks.get(s),n),Ks.set(s,n));const o=En(r.imports);for(const i of o)t.has(i)||(t.add(i),e(i))}(e)}(e)}create(e){return new Js(this.moduleType,e)}}function eo(e){return t=>{setTimeout(e,void 0,t)}}const to=class extends k{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let i=e,a=t||(()=>null),l=n;if(e&&"object"==typeof e){const t=e;i=null===(r=t.next)||void 0===r?void 0:r.bind(t),a=null===(s=t.error)||void 0===s?void 0:s.bind(t),l=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(a=eo(a),i&&(i=eo(i)),l&&(l=eo(l)));const c=super.subscribe({next:i,error:a,complete:l});return e instanceof h&&e.add(c),c}};Symbol;const no=new rn("Application Initializer");let ro=(()=>{class e{constructor(e){this.appInits=e,this.resolve=ys,this.reject=ys,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const t=this.appInits[r]();if(ss(t))e.push(t);else if((n=t)&&"function"==typeof n.subscribe){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}var n;Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(fn(no,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();const so=new rn("AppId"),oo={provide:so,useFactory:function(){return`${io()}${io()}${io()}`},deps:[]};function io(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ao=new rn("Platform Initializer"),lo=new rn("Platform ID"),co=new rn("appBootstrapListener");let uo=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();const ho=new rn("LocaleId"),po=new rn("DefaultCurrencyCode");class fo{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const mo=function(e){return new Xs(e)},go=mo,yo=function(e){return Promise.resolve(mo(e))},_o=function(e){const t=mo(e),n=En(Pe(e).declarations).reduce((e,t)=>{const n=je(t);return n&&e.push(new Qs(n)),e},[]);return new fo(t,n)},bo=_o,vo=function(e){return Promise.resolve(_o(e))};let wo=(()=>{class e{constructor(){this.compileModuleSync=go,this.compileModuleAsync=yo,this.compileModuleAndAllComponentsSync=bo,this.compileModuleAndAllComponentsAsync=vo}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();const xo=(()=>Promise.resolve(0))();function ko(e){"undefined"==typeof Zone?xo.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class To{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new to(!1),this.onMicrotaskEmpty=new to(!1),this.onStable=new to(!1),this.onError=new to(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=ye.requestAnimationFrame,t=ye.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ye,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,So(e),e.isCheckStableRunning=!0,Eo(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),So(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,o,i,a)=>{try{return Ao(e),n.invokeTask(s,o,i,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Io(e)}},onInvoke:(n,r,s,o,i,a,l)=>{try{return Ao(e),n.invoke(s,o,i,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Io(e)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,So(e),Eo(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!To.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(To.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Co,ys,ys);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Co={};function Eo(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function So(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Ao(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Io(e){e._nesting--,Eo(e)}class Oo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new to,this.onMicrotaskEmpty=new to,this.onStable=new to,this.onError=new to}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Do=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{To.assertNotInAngularZone(),ko(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ko(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(fn(To))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})(),Ro=(()=>{class e{constructor(){this._applications=new Map,Po.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Po.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();class Mo{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}let jo,Po=new Mo,No=!0,Ho=!1;const Fo=new rn("AllowMultipleToken");function Vo(e,t,n=[]){const r=`Platform: ${t}`,s=new rn(r);return(t=[])=>{let o=Lo();if(!o||o.injector.get(Fo,!1))if(e)e(n.concat(t).concat({provide:s,useValue:!0}));else{const e=n.concat(t).concat({provide:s,useValue:!0},{provide:Nr,useValue:"platform"});!function(e){if(jo&&!jo.destroyed&&!jo.injector.get(Fo,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");jo=e.get(Zo);const t=e.get(ao,null);t&&t.forEach(e=>e())}(Gr.create({providers:e,name:r}))}return function(e){const t=Lo();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function Lo(){return jo&&!jo.destroyed?jo:null}let Zo=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new Oo:("zone.js"===e?void 0:e)||new To({enableLongStackTrace:(Ho=!0,No),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:To,useValue:n}];return n.run(()=>{const t=Gr.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(t),o=s.injector.get(Tn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});s.onDestroy(()=>{$o(this._modules,s),e.unsubscribe()})}),function(e,t,n){try{const r=n();return ss(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,n,()=>{const e=s.injector.get(ro);return e.runInitializers(),e.donePromise.then(()=>(ds(s.injector.get(ho,hs)||hs),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=Bo({},t);return function(e,t,n){const r=new Xs(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(zo);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${z(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(fn(Gr))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();function Bo(e,t){return Array.isArray(t)?t.reduce(Bo,e):Object.assign(Object.assign({},e),t)}let zo=(()=>{class e{constructor(e,t,n,r,s){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new _(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),i=new _(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{To.assertNotInAngularZone(),ko(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{To.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=function(...e){let t=Number.POSITIVE_INFINITY,n=null,r=e[e.length-1];var s;return(s=r)&&"function"==typeof s.schedule?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof _?e[0]:function(e=Number.POSITIVE_INFINITY){return R(y,e)}(t)(function(e,t){return t?function(e,t){return new _(n=>{const r=new h;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}(e,t):new _(S(e))}(e,n))}(o,i.pipe(e=>{return P()((t=Z,function(e){let n;n="function"==typeof t?t:function(){return t};const r=Object.create(e,V);return r.source=e,r.subjectFactory=n,r})(e));var t}))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof fs?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get($s),s=n.create(Gr.NULL,[],t||n.selector,r),o=s.location.nativeElement,i=s.injector.get(Do,null),a=i&&s.injector.get(Ro);return i&&a&&a.registerApplication(o,i),s.onDestroy(()=>{this.detachView(s.hostView),$o(this.components,s),a&&a.unregisterApplication(o)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;$o(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(co,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(fn(To),fn(Gr),fn(Tn),fn(gs),fn(ro))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();function $o(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Uo=Vo(null,"core",[{provide:lo,useValue:"unknown"},{provide:Zo,deps:[Gr]},{provide:Ro,deps:[]},{provide:uo,deps:[]}]),Wo=[{provide:zo,useClass:zo,deps:[To,Gr,Tn,gs,ro]},{provide:Gs,deps:[To],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:ro,useClass:ro,deps:[[new _n,no]]},{provide:wo,useClass:wo,deps:[]},oo,{provide:Ns,useFactory:function(){return Bs},deps:[]},{provide:Fs,useFactory:function(){return zs},deps:[]},{provide:ho,useFactory:function(e){return ds(e=e||"undefined"!=typeof $localize&&$localize.locale||hs),e},deps:[[new yn(ho),new _n,new bn]]},{provide:po,useValue:"USD"}];let qo=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(fn(zo))},e.\u0275mod=Re({type:e}),e.\u0275inj=J({providers:Wo}),e})(),Go=null;function Qo(){return Go}const Yo=new rn("DocumentToken");var Ko=(()=>((Ko=Ko||{})[Ko.Zero=0]="Zero",Ko[Ko.One=1]="One",Ko[Ko.Two=2]="Two",Ko[Ko.Few=3]="Few",Ko[Ko.Many=4]="Many",Ko[Ko.Other=5]="Other",Ko))();class Jo{}let Xo=(()=>{class e extends Jo{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=cs(t);if(n)return n;const r=t.split("-")[0];if(n=cs(r),n)return n;if("en"===r)return as;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[us.PluralCase]}(t||this.locale)(e)){case Ko.Zero:return"zero";case Ko.One:return"one";case Ko.Two:return"two";case Ko.Few:return"few";case Ko.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(fn(ho))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})(),ei=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Re({type:e}),e.\u0275inj=J({providers:[{provide:Jo,useClass:Xo}]}),e})();class ti extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new ti,Go||(Go=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(ri=ri||document.querySelector("base"),ri?ri.getAttribute("href"):null);return null==t?null:function(e){ni=ni||document.createElement("a"),ni.setAttribute("href",e);const t=ni.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){ri=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,s]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,e)}}let ni,ri=null;const si=new rn("TRANSITION_ID"),oi=[{provide:no,useFactory:function(e,t,n){return()=>{n.get(ro).donePromise.then(()=>{const n=Qo(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let e=0;e<r.length;e++)n.remove(r[e])})}},deps:[si,Yo,Gr],multi:!0}];class ii{static init(){var e;e=new ii,Po=e}addToWindow(e){ye.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},ye.getAllAngularTestabilities=()=>e.getAllTestabilities(),ye.getAllAngularRootElements=()=>e.getAllRootElements(),ye.frameworkStabilizers||(ye.frameworkStabilizers=[]),ye.frameworkStabilizers.push(e=>{const t=ye.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?Qo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ai=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();const li=new rn("EventManagerPlugins");let ci=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(fn(li),fn(To))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();class ui{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Qo().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let hi=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})(),pi=(()=>{class e extends hi{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(di),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(di))}}return e.\u0275fac=function(t){return new(t||e)(fn(Yo))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();function di(e){Qo().remove(e)}const fi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mi=/%COMP%/g;function gi(e,t,n){for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?gi(e,s,n):(s=s.replace(mi,e),n.push(s))}return n}function yi(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let _i=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new bi(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case pe.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new vi(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case pe.ShadowDom:return new wi(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=gi(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(fn(ci),fn(pi),fn(so))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();class bi{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(fi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=fi[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=fi[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(Sn.DashCase|Sn.Important)?e.style.setProperty(t,n,r&Sn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Sn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,yi(n)):this.eventManager.addEventListener(e,t,yi(n))}}class vi extends bi{constructor(e,t,n,r){super(e),this.component=n;const s=gi(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(mi,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(mi,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class wi extends bi{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=gi(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const e=document.createElement("style");e.textContent=s[o],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let xi=(()=>{class e extends ui{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(fn(Yo))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();const ki=["alt","control","meta","shift"],Ti={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ci={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ei={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let Si=(()=>{class e extends ui{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qo().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(n.pop());let o="";if(ki.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),o+=e+".")}),o+=s,0!=n.length||0===s.length)return null;const i={};return i.domEventName=r,i.fullKey=o,i}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Ci.hasOwnProperty(t)&&(t=Ci[t]))}return Ti[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ki.forEach(r=>{r!=n&&(0,Ei[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return s=>{e.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(fn(Yo))},e.\u0275prov=K({token:e,factory:e.\u0275fac}),e})();const Ai=Vo(Uo,"browser",[{provide:lo,useValue:"browser"},{provide:ao,useValue:function(){ti.makeCurrent(),ii.init()},multi:!0},{provide:Yo,useFactory:function(){return function(e){qe=e}(document),document},deps:[]}]),Ii=[[],{provide:Nr,useValue:"root"},{provide:Tn,useFactory:function(){return new Tn},deps:[]},{provide:li,useClass:xi,multi:!0,deps:[Yo,To,lo]},{provide:li,useClass:Si,multi:!0,deps:[Yo]},[],{provide:_i,useClass:_i,deps:[ci,pi,so]},{provide:ws,useExisting:_i},{provide:hi,useExisting:pi},{provide:pi,useClass:pi,deps:[Yo]},{provide:Do,useClass:Do,deps:[To]},{provide:ci,useClass:ci,deps:[li,To]},{provide:class{},useClass:ai,deps:[]},[]];let Oi=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:so,useValue:t.appId},{provide:si,useExisting:so},oi]}}}return e.\u0275fac=function(t){return new(t||e)(fn(e,12))},e.\u0275mod=Re({type:e}),e.\u0275inj=J({providers:Ii,imports:[ei,qo]}),e})();"undefined"!=typeof window&&window;let Di=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=Ae({type:e,selectors:[["ikatsuba-root"]],decls:1355,vars:0,consts:[[1,"flex","items-start","mt-6","mb-6","max-w-3xl","m-auto"],["src","assets/iam.png",1,"rounded-full","w-20","mr-8"],[1,"text-gray-700","text-4xl","mt-3","mb-1"],[1,"text-gray-500"],["href","https://twitter.com/ItsTinkoff","target","_blank",1,"text-indigo-500"],["href","https://indepth.dev/","target","_blank",1,"text-indigo-500"],[1,"prose","xl:prose-xl","prose-red","m-auto"],["src","assets/angular-universal.png"],["href","https://github.com/angular/universal/blob/master/modules/express-engine/README.md"],["href","https://github.com/angular/universal/blob/master/modules/aspnetcore-engine/README.md"],["href","https://github.com/angular/universal/blob/master/modules/hapi-engine/README.md"],["href","https://github.com/angular/universal/tree/master/modules/socket-engine"],["href","https://www.npmjs.com/package/domino"],["href","https://indepth.dev/posts/1059/do-you-still-think-that-ngzone-zone-js-is-required-for-change-detection-in-angular"],["href","https://angular.io/api/core/ApplicationRef"],["href","https://angular.io/api/core/ApplicationRef#isStable"],["href","https://github.com/angular/angular/blob/11.1.x/packages/platform-server/src/utils.ts#L43"],["href","https://github.com/angular/angular/blob/11.1.x/packages/platform-server/src/utils.ts#L69"],["href","https://github.com/angular/angular/blob/11.1.x/packages/platform-server/src/utils.ts#L70"],[1,"code-highlighted","code-tsx"],[1,"syntax-all","syntax-keyword"],[1,"syntax-all","syntax-parameter"],[1,"syntax-all","syntax-string"],[1,"syntax-all","syntax-constant"],[1,"syntax-all","syntax-entity"],[1,"syntax-all","syntax-variable"],["href","https://github.com/IKatsuba/ngx-ssr"],["href","https://angular.io/api/core/NgZone"],[1,"syntax-all","syntax-comment"],["href","https://github.com/TinkoffCreditSystems/taiga-ui/blob/main/projects/cdk/observables/zone-free.ts#L30"],["href","https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching"],["href","https://ng-web-apis.github.io/"],["href","https://github.com/ng-web-apis/common#tokens"],["href","https://github.com/ng-web-apis/universal"]],template:function(e,t){if(1&e){ts(0,"div",0),rs(1,"img",1),ts(2,"div"),ts(3,"h2",2),os(4,"Igor Katsuba"),ns(),ts(5,"p",3),os(6," Angular Researcher / Working at "),ts(7,"a",4),os(8,"ItsTinkoff"),ns(),os(9," / Author at "),ts(10,"a",5),os(11,"indepth.dev"),ns(),ns(),ns(),ns(),ts(12,"section",6),rs(13,"hr"),ts(14,"h1"),os(15,"Angular Universal: real app problems"),ns(),ts(16,"figure"),rs(17,"img",7),ns(),ts(18,"p"),ts(19,"strong"),os(20,"Angular Universal"),ns(),os(21," is an open-source project that extends the functionality of "),ts(22,"code"),os(23,"@angular/platform-server"),ns(),os(24,". The project makes server-side rendering possible in Angular. "),ns(),ts(25,"p"),os(26,"Angular Universal supports multiple backends:"),ns(),ts(27,"ol"),ts(28,"li"),ts(29,"a",8),os(30,"Express"),ns(),ns(),ts(31,"li"),ts(32,"a",9),os(33,"ASP.NET Core"),ns(),ns(),ts(34,"li"),ts(35,"a",10),os(36,"hapi"),ns(),ns(),ns(),ts(37,"p"),os(38," Another package "),ts(39,"a",11),os(40,"Socket Engine"),ns(),os(41," is a framework-agnostic that theoretically allows any backend to be connected to an SSR-server. "),ns(),ts(42,"p"),os(43," This article will discuss the issues and possible solutions we encountered while developing a real application with Angular Universal and Express. "),ns(),rs(44,"hr"),ts(45,"h1"),os(46,"How Angular Universal Works"),ns(),ts(47,"p"),os(48," For rendering on the server, Angular uses the DOM implementation for node.js \u2014 "),ts(49,"a",12),os(50,"domino"),ns(),os(51,". For each GET request, "),ts(52,"code"),os(53,"domino"),ns(),os(54," creates a similar Browser Document object. In that object context, Angular initializes the application. "),ns(),ts(55,"p"),os(56," The app makes requests to the backend, performs various asynchronous tasks, and applies any change detection from components to the DOM while still running inside node.js environment. The render engine then serializes DOM into a string and serves up the string to the server. The server sends this HTML as a response to the GET request. Angular application on the server is destroyed after rendering. "),ns(),rs(57,"hr"),ts(58,"h1"),os(59,"SSR issues in Angular"),ns(),ts(60,"h2"),os(61,"1. Infinite page loading"),ns(),ts(62,"h3"),os(63,"Situation"),ns(),ts(64,"p"),os(65," The user opens a page on your site and sees a white screen. In other words, the time until the first byte takes too long. The browser wants to receive a response from the server, but the request ends up with a timeout. "),ns(),ts(66,"h3"),os(67,"Why is this happening"),ns(),ts(68,"p"),os(69," Most likely, the problem lies in the Angular-specific SSR mechanism. Before we understand at what point the page is rendered, let's define Zone.js and ApplicationRef. "),ns(),ts(70,"p"),ts(71,"a",13),ts(72,"strong"),os(73,"Zone.js"),ns(),ns(),os(74," is a tool that allows you to track asynchronous operations. With its help, Angular creates its zone and launches the application in it. At the end of each asynchronous operation in the Angular zone, change detection is triggered. "),ns(),ts(75,"p"),ts(76,"strong"),os(77,"ApplicationRef"),ns(),os(78," is a reference to the running application ("),ts(79,"a",14),os(80,"docs"),ns(),os(81,"). Of all this class's functionality, we are interested in the "),ts(82,"a",15),os(83,"ApplicationRef#isStable"),ns(),os(84," property. It is an Observable that emits a boolean. isStable is true when no asynchronous tasks are running in the Angular zone and false when there are any. "),ns(),ts(85,"p"),ts(86,"strong"),os(87,"So, application stability is the state of the application, which depends on the presence of asynchronous tasks in the Angular zone."),ns(),ns(),ts(88,"p"),os(89," So, at the moment of "),ts(90,"a",16),os(91,"the first onset of stability"),ns(),os(92,", Angular "),ts(93,"a",17),os(94,"renders the current state"),ns(),os(95," applications and "),ts(96,"a",18),os(97,"destroys the platform"),ns(),os(98,". And the platform will destroy the application. "),ns(),ts(99,"p"),os(100," Now we can assume that the user is trying to open an application that cannot achieve stability. setInterval, rxjs.interval or any other recursive asynchronous operation running in the Angular zone will make stability impossible. HTTP requests also affect stability. The lingering request on the server delays the moment the page is rendered. "),ns(),ts(101,"h3"),os(102,"Possible Solution"),ns(),ts(103,"p"),os(104," To avoid the situation with long requests, use the timeout operator from rxjs library: "),ns(),ts(105,"pre"),ts(106,"code",19),ts(107,"span",20),os(108,"import"),ns(),os(109," { "),ts(110,"span",21),os(111,"timeout"),ns(),os(112,", "),ts(113,"span",21),os(114,"catchError"),ns(),os(115," } "),ts(116,"span",20),os(117,"from"),ns(),os(118," "),ts(119,"span",22),os(120,"'rxjs/operators'"),ns(),os(121,";\n"),ts(122,"span",20),os(123,"import"),ns(),os(124," { "),ts(125,"span",21),os(126,"of"),ns(),os(127," } "),ts(128,"span",20),os(129,"from"),ns(),os(130," "),ts(131,"span",22),os(132,"'rxjs/observable/of'"),ns(),os(133,";\n\n"),ts(134,"span",21),os(135,"http"),ns(),os(136,"."),ts(137,"span",23),os(138,"get"),ns(),os(139,"("),ts(140,"span",22),os(141,"'https://example.com'"),ns(),os(142,")\n\t."),ts(143,"span",24),os(144,"pipe"),ns(),os(145,"(\n\t\t"),ts(146,"span",24),os(147,"timeout"),ns(),os(148,"("),ts(149,"span",23),os(150,"2000"),ns(),os(151,"),\n\t\t"),ts(152,"span",24),os(153,"catchError"),ns(),os(154,"("),ts(155,"span",25),os(156,"e"),ns(),os(157," "),ts(158,"span",20),os(159,"=>"),ns(),os(160," "),ts(161,"span",20),os(162,"of"),ns(),os(163,"("),ts(164,"span",23),os(165,"null"),ns(),os(166,"))\n\t)."),ts(167,"span",24),os(168,"subscribe"),ns(),os(169,"()"),ns(),ns(),ts(170,"p"),os(171," The operator will throw an exception after a specified if no server response is received. "),ns(),ts(172,"p"),os(173,"This approach has 2 cons:"),ns(),ts(174,"ul"),ts(175,"li"),os(176,"There is no convenient division of logic by platform."),ns(),ts(177,"li"),os(178,"The timeout operator must be written manually for each request."),ns(),ns(),ts(179,"p"),os(180," As a more straightforward solution, you can use the NgxSsrTimeoutModule module from the "),ts(181,"a",26),os(182,"@ngx-ssr/timeout"),ns(),os(183," package. Import the module with the timeout value into the root module of the application. If the module is imported into AppServerModule, then HTTP request timeouts will only work for the server. "),ns(),ts(184,"pre"),ts(185,"code",19),ts(186,"span",20),os(187,"import"),ns(),os(188," { "),ts(189,"span",21),os(190,"NgModule"),ns(),os(191," } "),ts(192,"span",20),os(193,"from"),ns(),os(194," "),ts(195,"span",22),os(196,"'@angular/core'"),ns(),os(197,";\n"),ts(198,"span",20),os(199,"import"),ns(),os(200," {\n\t"),ts(201,"span",21),os(202,"ServerModule"),ns(),os(203,",\n    } "),ts(204,"span",20),os(205,"from"),ns(),os(206," "),ts(207,"span",22),os(208,"'@angular/platform-server'"),ns(),os(209,";\n"),ts(210,"span",20),os(211,"import"),ns(),os(212," { "),ts(213,"span",21),os(214,"AppModule"),ns(),os(215," } "),ts(216,"span",20),os(217,"from"),ns(),os(218," "),ts(219,"span",22),os(220,"'./app.module'"),ns(),os(221,";\n"),ts(222,"span",20),os(223,"import"),ns(),os(224," { "),ts(225,"span",21),os(226,"AppComponent"),ns(),os(227," } "),ts(228,"span",20),os(229,"from"),ns(),os(230," "),ts(231,"span",22),os(232,"'./app.component'"),ns(),os(233,";\n"),ts(234,"span",20),os(235,"import"),ns(),os(236," { "),ts(237,"span",21),os(238,"NgxSsrTimeoutModule"),ns(),os(239," } "),ts(240,"span",20),os(241,"from"),ns(),os(242," "),ts(243,"span",22),os(244,"'@ngx-ssr/timeout'"),ns(),os(245,";\n\n@"),ts(246,"span",24),os(247,"NgModule"),ns(),os(248,"({\n    imports: [\n      "),ts(249,"span",21),os(250,"AppModule"),ns(),os(251,",\n      "),ts(252,"span",21),os(253,"ServerModule"),ns(),os(254,",\n      "),ts(255,"span",21),os(256,"NgxSsrTimeoutModule"),ns(),os(257,"."),ts(258,"span",24),os(259,"forRoot"),ns(),os(260,"({ timeout: "),ts(261,"span",23),os(262,"500"),ns(),os(263," }),\n\t],\n\tbootstrap: ["),ts(264,"span",21),os(265,"AppComponent"),ns(),os(266,"],\n})\n"),ts(267,"span",20),os(268,"export"),ns(),os(269," "),ts(270,"span",20),os(271,"class"),ns(),os(272," "),ts(273,"span",24),os(274,"AppServerModule"),ns(),os(275," {}"),ns(),ns(),ts(276,"p"),os(277," Use the "),ts(278,"a",27),os(279,"NgZone"),ns(),os(280," service to take asynchronous operations out of the Angular zone. "),ns(),ts(281,"pre"),ts(282,"code",19),ts(283,"span",20),os(284,"import"),ns(),os(285," { "),ts(286,"span",21),os(287,"Injectable"),ns(),os(288,", "),ts(289,"span",21),os(290,"NgZone"),ns(),os(291," } "),ts(292,"span",20),os(293,"from"),ns(),os(294," "),ts(295,"span",22),os(296,'"@angular/core"'),ns(),os(297,";\n\n@"),ts(298,"span",24),os(299,"Injectable"),ns(),os(300,"()\n"),ts(301,"span",20),os(302,"export"),ns(),os(303," "),ts(304,"span",20),os(305,"class"),ns(),os(306," "),ts(307,"span",24),os(308,"SomeService"),ns(),os(309," {\n    "),ts(310,"span",20),os(311,"constructor"),ns(),os(312,"("),ts(313,"span",20),os(314,"private"),ns(),os(315," "),ts(316,"span",25),os(317,"ngZone"),ns(),ts(318,"span",20),os(319,":"),ns(),os(320," "),ts(321,"span",24),os(322,"NgZone"),ns(),os(323,"){\n\t\t"),ts(324,"span",23),os(325,"this"),ns(),os(326,"."),ts(327,"span",21),os(328,"ngZone"),ns(),os(329,"."),ts(330,"span",24),os(331,"runOutsideAngular"),ns(),os(332,"(() "),ts(333,"span",20),os(334,"=>"),ns(),os(335," {\n    "),ts(336,"span",24),os(337,"interval"),ns(),os(338,"("),ts(339,"span",23),os(340,"1"),ns(),os(341,")."),ts(342,"span",24),os(343,"subscribe"),ns(),os(344,"(() "),ts(345,"span",20),os(346,"=>"),ns(),os(347," {\n\t\t\t\t"),ts(348,"span",28),os(349,"// somo code\n"),ns(),os(350,"\t\t\t})\n\t\t});\n\t}\n}"),ns(),ns(),ts(351,"p"),os(352," To solve this problem, you can use the "),ts(353,"a",29),os(354,"tuiZonefree"),ns(),os(355," from the "),ts(356,"code"),os(357,"@taiga-ui/cdk"),ns(),os(358,": "),ns(),ts(359,"pre"),ts(360,"code",19),ts(361,"span",20),os(362,"import"),ns(),os(363," { "),ts(364,"span",21),os(365,"Injectable"),ns(),os(366,", "),ts(367,"span",21),os(368,"NgZone"),ns(),os(369," } "),ts(370,"span",20),os(371,"from"),ns(),os(372," "),ts(373,"span",22),os(374,'"@angular/core"'),ns(),os(375,";\n"),ts(376,"span",20),os(377,"import"),ns(),os(378," { "),ts(379,"span",21),os(380,"tuiZonefree"),ns(),os(381," } "),ts(382,"span",20),os(383,"from"),ns(),os(384," "),ts(385,"span",22),os(386,'"@taiga-ui/cdk"'),ns(),os(387,";\n\n@"),ts(388,"span",24),os(389,"Injectable"),ns(),os(390,"()\n"),ts(391,"span",20),os(392,"export"),ns(),os(393," "),ts(394,"span",20),os(395,"class"),ns(),os(396," "),ts(397,"span",24),os(398,"SomeService"),ns(),os(399," {\n    "),ts(400,"span",20),os(401,"constructor"),ns(),os(402,"("),ts(403,"span",20),os(404,"private"),ns(),os(405," "),ts(406,"span",25),os(407,"ngZone"),ns(),ts(408,"span",20),os(409,":"),ns(),os(410," "),ts(411,"span",24),os(412,"NgZone"),ns(),os(413,"){\n\t\t"),ts(414,"span",24),os(415,"interval"),ns(),os(416,"("),ts(417,"span",23),os(418,"1"),ns(),os(419,")."),ts(420,"span",24),os(421,"pipe"),ns(),os(422,"("),ts(423,"span",24),os(424,"tuiZonefree"),ns(),os(425,"("),ts(426,"span",21),os(427,"ngZone"),ns(),os(428,"))."),ts(429,"span",24),os(430,"subscribe"),ns(),os(431,"()\n\t}\n}"),ns(),ns(),ts(432,"p"),os(433," But there is a nuance. Any task must be interrupted when the application is destroyed. Otherwise, you can catch a memory leak (see issue #5). You also need to understand that tasks that are removed from the zone will not trigger change detection. "),ns(),ts(434,"h2"),os(435,"2. Lack of cache out of the box"),ns(),ts(436,"h3"),os(437,"Situation"),ns(),ts(438,"p"),os(439," The user loads the home page of the site. The server requests data for the master and renders it, spending 2 seconds on it. Then the user goes from the main to the child section. Then it tries to go back and waits for the same 2 seconds as the first time. "),ns(),ts(440,"p"),os(441," If we assume that the data on which the main render depends has not changed, it turns out that HTML with this set has already been rendered. And in theory, we can reuse the HTML we got earlier. "),ns(),ts(442,"h3"),os(443,"Possible Solution"),ns(),ts(444,"p"),os(445," Various caching techniques come to the rescue. We'll cover two: in-memory cache and HTTP cache. "),ns(),ts(446,"p"),ts(447,"strong"),os(448,"HTTP cache."),ns(),os(449," When using a network cache, it's all about setting the correct response headers on the server. They specify the cache lifetime and caching policy: "),ns(),ts(450,"pre"),ts(451,"code",19),ts(452,"span",21),os(453,"Cache"),ns(),ts(454,"span",20),os(455,"-"),ns(),ts(456,"span",21),os(457,"Control"),ns(),os(458,": "),ts(459,"span",21),os(460,"max"),ns(),ts(461,"span",20),os(462,"-"),ns(),ts(463,"span",21),os(464,"age"),ns(),os(465," "),ts(466,"span",20),os(467,"="),ns(),os(468," "),ts(469,"span",23),os(470,"31536000"),ns(),ns(),ns(),ts(471,"p"),os(472," This option is suitable for an unauthorized zone and in the presence of long unchanging data. "),ns(),ts(473,"p"),os(474," You can read more about the HTTP cache "),ts(475,"a",30),os(476,"here"),ns(),ns(),ts(477,"p"),ts(478,"strong"),os(479,"In-memory cache."),ns(),os(480," The in-memory cache can be used for both rendered pages and API requests within the application itself. Both possibilities are package "),ts(481,"code"),os(482,"@ngx-ssr/cache"),ns(),os(483,". "),ns(),ts(484,"p"),os(485," Add the NgxSsrCacheModule module to the AppModule to cache API requests and on the server in the browser. "),ns(),ts(486,"p"),os(487," The "),ts(488,"code"),os(489,"maxSize"),ns(),os(490," property is responsible for the maximum cache size. A value of 50 means that the cache will contain more than 50 of the last GET requests made from the application. "),ns(),ts(491,"p"),os(492," The "),ts(493,"code"),os(494,"maxAge"),ns(),os(495," property is responsible for the cache lifetime. Specified in milliseconds. "),ns(),ts(496,"pre"),ts(497,"code",19),ts(498,"span",20),os(499,"import"),ns(),os(500," { "),ts(501,"span",21),os(502,"BrowserModule"),ns(),os(503," } "),ts(504,"span",20),os(505,"from"),ns(),os(506," "),ts(507,"span",22),os(508,"'@angular/platform-browser'"),ns(),os(509,";\n"),ts(510,"span",20),os(511,"import"),ns(),os(512," { "),ts(513,"span",21),os(514,"NgModule"),ns(),os(515," } "),ts(516,"span",20),os(517,"from"),ns(),os(518," "),ts(519,"span",22),os(520,"'@angular/core'"),ns(),os(521,";\n"),ts(522,"span",20),os(523,"import"),ns(),os(524," { "),ts(525,"span",21),os(526,"AppComponent"),ns(),os(527," } "),ts(528,"span",20),os(529,"from"),ns(),os(530," "),ts(531,"span",22),os(532,"'./app.component'"),ns(),os(533,";\n"),ts(534,"span",20),os(535,"import"),ns(),os(536," { "),ts(537,"span",21),os(538,"NgxSsrCacheModule"),ns(),os(539," } "),ts(540,"span",20),os(541,"from"),ns(),os(542," "),ts(543,"span",22),os(544,"'@ngx-ssr/cache'"),ns(),os(545,";\n"),ts(546,"span",20),os(547,"import"),ns(),os(548," { "),ts(549,"span",21),os(550,"environment"),ns(),os(551," } "),ts(552,"span",20),os(553,"from"),ns(),os(554," "),ts(555,"span",22),os(556,"'../environments/environment'"),ns(),os(557,";\n\n@"),ts(558,"span",24),os(559,"NgModule"),ns(),os(560,"({\n    declarations: ["),ts(561,"span",21),os(562,"AppComponent"),ns(),os(563,"],\n    imports: [\n      "),ts(564,"span",21),os(565,"BrowserModule"),ns(),os(566,",\n      "),ts(567,"span",21),os(568,"NgxSsrCacheModule"),ns(),os(569,"."),ts(570,"span",24),os(571,"configLruCache"),ns(),os(572,"({ maxAge: "),ts(573,"span",23),os(574,"10"),ns(),os(575," "),ts(576,"span",20);os(577,"*"),ns(),os(578," "),ts(579,"span",23),os(580,"60_000"),ns(),os(581,", maxSize: "),ts(582,"span",23),os(583,"50"),ns(),os(584," }),\n\t],\n\tbootstrap: ["),ts(585,"span",21),os(586,"AppComponent"),ns(),os(587,"],\n})\n"),ts(588,"span",20),os(589,"export"),ns(),os(590," "),ts(591,"span",20),os(592,"class"),ns(),os(593," "),ts(594,"span",24),os(595,"AppModule"),ns(),os(596," {}"),ns(),ns(),ts(597,"p"),os(598,"You can go ahead and cache the HTML itself."),ns(),ts(599,"p"),os(600," For example, everything in the same package "),ts(601,"code"),os(602,"@ngx-ssr/cache"),ns(),os(603," has a submodule "),ts(604,"code"),os(605,"@ngx-ssr/cache/express"),ns(),os(606,". It imports a single "),ts(607,"code"),os(608,"withCache"),ns(),os(609," function. The function is a wrapper over the render engine. "),ns(),ts(610,"pre"),ts(611,"code",19),ts(612,"span",20),os(613,"import"),ns(),os(614," { "),ts(615,"span",21),os(616,"ngExpressEngine"),ns(),os(617," } "),ts(618,"span",20),os(619,"from"),ns(),os(620," "),ts(621,"span",22),os(622,"'@nguniversal/express-engine'"),ns(),os(623,";\n      "),ts(624,"span",20),os(625,"import"),ns(),os(626," { "),ts(627,"span",21),os(628,"LRUCache"),ns(),os(629," } "),ts(630,"span",20),os(631,"from"),ns(),os(632," "),ts(633,"span",22),os(634,"'@ngx-ssr/cache'"),ns(),os(635,";\n      "),ts(636,"span",20),os(637,"import"),ns(),os(638," { "),ts(639,"span",21),os(640,"withCache"),ns(),os(641," } "),ts(642,"span",20),os(643,"from"),ns(),os(644," "),ts(645,"span",22),os(646,"'@ngx-ssr/cache/express'"),ns(),os(647,";\n\n      "),ts(648,"span",21),os(649,"server"),ns(),os(650,"."),ts(651,"span",24),os(652,"engine"),ns(),os(653,"(\n      "),ts(654,"span",22),os(655,"'html'"),ns(),os(656,",\n      "),ts(657,"span",24),os(658,"withCache"),ns(),os(659,"(\n      "),ts(660,"span",20),os(661,"new"),ns(),os(662," "),ts(663,"span",24),os(664,"LRUCache"),ns(),os(665,"({ maxAge: "),ts(666,"span",23),os(667,"10"),ns(),os(668," "),ts(669,"span",20),os(670,"*"),ns(),os(671," "),ts(672,"span",23),os(673,"60_000"),ns(),os(674,", maxSize: "),ts(675,"span",23),os(676,"100"),ns(),os(677," }),\n\t\t"),ts(678,"span",24),os(679,"ngExpressEngine"),ns(),os(680,"({\n\t\t\tbootstrap: "),ts(681,"span",21),os(682,"AppServerModule"),ns(),os(683,",\n      })\n\t)\n);"),ns(),ns(),ts(684,"h2"),os(685,"3. Server errors of type ReferenceError: localStorage is not defined"),ns(),ts(686,"h3"),os(687,"Situation"),ns(),ts(688,"p"),os(689," The developer calls localStorage right in the body of the service. It retrieves data from the local storage by key. But on the server, this code crashes with an error: ReferenceError: localStorage is undefined. "),ns(),ts(690,"h3"),os(691,"Why is this happening"),ns(),ts(692,"p"),os(693," When running an Angular application on a server, the standard browser API is missing from the global space. For example, there's no global object "),ts(694,"code"),os(695,"document"),ns(),os(696," like you'd expect in a browser environment. To get the reference to the document, you must use the DOCUMENT token and DI. "),ns(),ts(697,"h3"),os(698,"Possible Solution"),ns(),ts(699,"p"),os(700," Don't use the browser API through the global space. There is DI for this. Through DI, you can replace or disable browser implementations for their safe use on the server. "),ns(),ts(701,"p"),os(702," The "),ts(703,"a",31),os(704,"Web API for Angular"),ns(),os(705," can be used to resolve this issue. "),ns(),ts(706,"p"),os(707,"For example:"),ns(),ts(708,"pre"),ts(709,"code",19),ts(710,"span",20),os(711,"import"),ns(),os(712," {"),ts(713,"span",21),os(714,"Component"),ns(),os(715,", "),ts(716,"span",21),os(717,"Inject"),ns(),os(718,", "),ts(719,"span",21),os(720,"NgModule"),ns(),os(721,"} "),ts(722,"span",20),os(723,"from"),ns(),os(724," "),ts(725,"span",22),os(726,"'@angular/core'"),ns(),os(727,";\n"),ts(728,"span",20),os(729,"import"),ns(),os(730," {"),ts(731,"span",21),os(732,"LOCAL_STORAGE"),ns(),os(733,"} "),ts(734,"span",20),os(735,"from"),ns(),os(736," "),ts(737,"span",22),os(738,"'@ng-web-apis/common'"),ns(),os(739,";\n\n@"),ts(740,"span",24),os(741,"Component"),ns(),os(742,"({"),ts(743,"span",20),os(744,"..."),ns(),os(745,"})\n"),ts(746,"span",20),os(747,"export"),ns(),os(748," "),ts(749,"span",20),os(750,"class"),ns(),os(751," "),ts(752,"span",24),os(753,"SomeComponent"),ns(),os(754," {\n    "),ts(755,"span",20),os(756,"constructor"),ns(),os(757,"(@"),ts(758,"span",24),os(759,"Inject"),ns(),os(760,"("),ts(761,"span",23),os(762,"LOCAL_STORAGE"),ns(),os(763,") "),ts(764,"span",25),os(765,"localStorage"),ns(),ts(766,"span",20),os(767,":"),ns(),os(768," "),ts(769,"span",24),os(770,"Storage"),ns(),os(771,") {\n\t\t"),ts(772,"span",21),os(773,"localStorage"),ns(),os(774,"."),ts(775,"span",23),os(776,"getItem"),ns(),os(777,"("),ts(778,"span",22),os(779,"'key'"),ns(),os(780,");\n\t}\n}"),ns(),ns(),ts(781,"p"),os(782," The example above uses the "),ts(783,"code"),os(784,"LOCAL_STORAGE"),ns(),os(785," token from the "),ts(786,"a",32),os(787,"@ng-web-apis/common"),ns(),os(788," package. But when we run this code on the server, we will get an error from the description. Just add "),ts(789,"code"),os(790,"UNIVERSAL_LOCAL_STORAGE"),ns(),os(791," from the package "),ts(792,"a",33),os(793,"@ng-web-apis/universal"),ns(),os(794," in the providers "),ts(795,"code"),os(796,"AppServerModule"),ns(),os(797,", and by the token "),ts(798,"code"),os(799,"LOCAL_STORAGE"),ns(),os(800,", you will receive an implementation of localStorage for the server. "),ns(),ts(801,"pre"),ts(802,"code",19),ts(803,"span",20),os(804,"import"),ns(),os(805," { "),ts(806,"span",21),os(807,"NgModule"),ns(),os(808," } "),ts(809,"span",20),os(810,"from"),ns(),os(811," "),ts(812,"span",22),os(813,"'@angular/core'"),ns(),os(814,";\n"),ts(815,"span",20),os(816,"import"),ns(),os(817," {\n    "),ts(818,"span",21),os(819,"ServerModule"),ns(),os(820,",\n} "),ts(821,"span",20),os(822,"from"),ns(),os(823," "),ts(824,"span",22),os(825,"'@angular/platform-server'"),ns(),os(826,";\n"),ts(827,"span",20),os(828,"import"),ns(),os(829," { "),ts(830,"span",21),os(831,"AppModule"),ns(),os(832," } "),ts(833,"span",20),os(834,"from"),ns(),os(835," "),ts(836,"span",22),os(837,"'./app.module'"),ns(),os(838,";\n"),ts(839,"span",20),os(840,"import"),ns(),os(841," { "),ts(842,"span",21),os(843,"AppComponent"),ns(),os(844," } "),ts(845,"span",20),os(846,"from"),ns(),os(847," "),ts(848,"span",22),os(849,"'./app.component'"),ns(),os(850,";\n"),ts(851,"span",20),os(852,"import"),ns(),os(853," { "),ts(854,"span",21),os(855,"UNIVERSAL_LOCAL_STORAGE"),ns(),os(856," } "),ts(857,"span",20),os(858,"from"),ns(),os(859," "),ts(860,"span",22),os(861,"'@ngx-ssr/timeout'"),ns(),os(862,";\n\n@"),ts(863,"span",24),os(864,"NgModule"),ns(),os(865,"({\n    imports: [\n      "),ts(866,"span",21),os(867,"AppModule"),ns(),os(868,",\n      "),ts(869,"span",21),os(870,"ServerModule"),ns(),os(871,",\n    ],\n    providers: ["),ts(872,"span",23),os(873,"UNIVERSAL_LOCAL_STORAGE"),ns(),os(874,"],\n    bootstrap: ["),ts(875,"span",21),os(876,"AppComponent"),ns(),os(877,"],\n})\n"),ts(878,"span",20),os(879,"export"),ns(),os(880," "),ts(881,"span",20),os(882,"class"),ns(),os(883," "),ts(884,"span",24),os(885,"AppServerModule"),ns(),os(886," {}"),ns(),ns(),ts(887,"h2"),os(888,"4. Inconvenient separation of logic"),ns(),ts(889,"h3"),os(890,"Situation"),ns(),ts(891,"p"),os(892," If you need to render the block only in the browser, you need to write approximately the following code: "),ns(),ts(893,"pre"),ts(894,"code",19),os(895,"@"),ts(896,"span",24),os(897,"Component"),ns(),os(898,"({\n    selector: "),ts(899,"span",22),os(900,"'ram-root'"),ns(),os(901,",\n\ttemplate: "),ts(902,"span",22),os(903,"'<some-\u0441omp *ngIf=\"isServer\"></some-\u0441omp>'"),ns(),os(904,",\n\tstyleUrls: ["),ts(905,"span",22),os(906,"'./app.component.less'"),ns(),os(907,"],\n})\n"),ts(908,"span",20),os(909,"export"),ns(),os(910," "),ts(911,"span",20),os(912,"class"),ns(),os(913," "),ts(914,"span",24),os(915,"AppComponent"),ns(),os(916," {\n      isServer "),ts(917,"span",20),os(918,"="),ns(),os(919," "),ts(920,"span",24),os(921,"isPlatformServer"),ns(),os(922,"("),ts(923,"span",23),os(924,"this"),ns(),os(925,"."),ts(926,"span",21),os(927,"platformId"),ns(),os(928,");\n\n        "),ts(929,"span",20),os(930,"constructor"),ns(),os(931,"(@"),ts(932,"span",24),os(933,"Inject"),ns(),os(934,"("),ts(935,"span",23),os(936,"PLATFORM_ID"),ns(),os(937,") "),ts(938,"span",20),os(939,"private"),ns(),os(940," "),ts(941,"span",25),os(942,"platformId"),ns(),ts(943,"span",20),os(944,":"),ns(),os(945," "),ts(946,"span",24),os(947,"Object"),ns(),os(948,"){}\n        }"),ns(),ns(),ts(949,"p"),os(950," The component needs to get the "),ts(951,"code"),os(952,"PLATFORM_ID"),ns(),os(953,", target platform, and understand the class's public property. This property will be used in the template in conjunction with the "),ts(954,"code"),os(955,"ngIf"),ns(),os(956," directive. "),ns(),ts(957,"h3"),os(958,"Possible Solution"),ns(),ts(959,"p"),os(960," With the help of structural directives and DI, the above mechanism can be greatly simplified. "),ns(),ts(961,"p"),os(962,"First, let's wrap the server definition in a token."),ns(),ts(963,"pre"),ts(964,"code",19),ts(965,"span",20),os(966,"export"),ns(),os(967," "),ts(968,"span",20),os(969,"const"),ns(),os(970," IS_SERVER_PLATFORM "),ts(971,"span",20),os(972,"="),ns(),os(973," "),ts(974,"span",20),os(975,"new"),ns(),os(976," "),ts(977,"span",24),os(978,"InjectionToken"),ns(),os(979,"<"),ts(980,"span",23),os(981,"boolean"),ns(),os(982,">("),ts(983,"span",22),os(984,"'Is server?'"),ns(),os(985,", {\n        factory() {\n      "),ts(986,"span",20),os(987,"return"),ns(),os(988," "),ts(989,"span",24),os(990,"isPlatformServer"),ns(),os(991,"("),ts(992,"span",24),os(993,"inject"),ns(),os(994,"("),ts(995,"span",23),os(996,"PLATFORM_ID"),ns(),os(997,"));\n        },\n      });"),ns(),ns(),ts(998,"p"),os(999," Create a structured directive using the "),ts(1e3,"code"),os(1001,"IS_SERVER_PLATFORM"),ns(),os(1002," token with one simple target: render the component only on the server. "),ns(),ts(1003,"pre"),ts(1004,"code",19),os(1005,"@"),ts(1006,"span",24),os(1007,"Directive"),ns(),os(1008,"({\n        selector: "),ts(1009,"span",22),os(1010,"'[ifIsServer]'"),ns(),os(1011,",\n      })\n"),ts(1012,"span",20),os(1013,"export"),ns(),os(1014," "),ts(1015,"span",20),os(1016,"class"),ns(),os(1017," "),ts(1018,"span",24),os(1019,"IfIsServerDirective"),ns(),os(1020," {\n    "),ts(1021,"span",20),os(1022,"constructor"),ns(),os(1023,"(\n      @"),ts(1024,"span",24),os(1025,"Inject"),ns(),os(1026,"("),ts(1027,"span",23),os(1028,"IS_SERVER_PLATFORM"),ns(),os(1029,") "),ts(1030,"span",25),os(1031,"isServer"),ns(),ts(1032,"span",20),os(1033,":"),ns(),os(1034," "),ts(1035,"span",23),os(1036,"boolean"),ns(),os(1037,",\n      "),ts(1038,"span",25),os(1039,"templateRef"),ns(),ts(1040,"span",20),os(1041,":"),ns(),os(1042," "),ts(1043,"span",24),os(1044,"TemplateRef"),ns(),os(1045,"<"),ts(1046,"span",23),os(1047,"any"),ns(),os(1048,">,\n\t\t"),ts(1049,"span",25),os(1050,"viewContainer"),ns(),ts(1051,"span",20),os(1052,":"),ns(),os(1053," "),ts(1054,"span",24),os(1055,"ViewContainerRef"),ns(),os(1056,"\n\t) {\n\t\t"),ts(1057,"span",20),os(1058,"if"),ns(),os(1059," ("),ts(1060,"span",21),os(1061,"isServer"),ns(),os(1062,") {\n    "),ts(1063,"span",21),os(1064,"viewContainer"),ns(),os(1065,"."),ts(1066,"span",24),os(1067,"createEmbeddedView"),ns(),os(1068,"("),ts(1069,"span",21),os(1070,"templateRef"),ns(),os(1071,");\n\t\t}\n\t}\n}"),ns(),ns(),ts(1072,"p"),os(1073,"The code looks similar to the "),ts(1074,"code"),os(1075,"IfIsBowser"),ns(),os(1076," directive."),ns(),ts(1077,"p"),os(1078,"Now let's refactor the component:"),ns(),ts(1079,"pre"),ts(1080,"code",19),os(1081,"@"),ts(1082,"span",24),os(1083,"Component"),ns(),os(1084,"({\n    selector: "),ts(1085,"span",22),os(1086,"'ram-root'"),ns(),os(1087,",\n\ttemplate: "),ts(1088,"span",22),os(1089,"'<some-\u0441omp *ifIsServer\"></some-\u0441omp>'"),ns(),os(1090,",\n\tstyleUrls: ["),ts(1091,"span",22),os(1092,"'./app.component.less'"),ns(),os(1093,"],\n})\n"),ts(1094,"span",20),os(1095,"export"),ns(),os(1096," "),ts(1097,"span",20),os(1098,"class"),ns(),os(1099," "),ts(1100,"span",24),os(1101,"AppComponent"),ns(),os(1102," {}"),ns(),ns(),ts(1103,"p"),os(1104," Extra properties have been removed from the component. The component template is now a bit simpler. "),ns(),ts(1105,"p"),os(1106," Such directives declaratively hide and show content depending on the platform. "),ns(),ts(1107,"p"),os(1108," We have collected the tokens and directives in the package "),ts(1109,"code"),os(1110,"@ngx-ssr/platform"),ns(),os(1111,". "),ns(),ts(1112,"h2"),os(1113,"5. Memory Leak"),ns(),ts(1114,"h3"),os(1115,"Situation"),ns(),ts(1116,"p"),os(1117," At initialization, the service starts an interval and performs some actions. "),ns(),ts(1118,"pre"),ts(1119,"code",19),ts(1120,"span",20),os(1121,"import"),ns(),os(1122," { "),ts(1123,"span",21),os(1124,"Injectable"),ns(),os(1125,", "),ts(1126,"span",21),os(1127,"NgZone"),ns(),os(1128," } "),ts(1129,"span",20),os(1130,"from"),ns(),os(1131," "),ts(1132,"span",22),os(1133,'"@angular/core"'),ns(),os(1134,";\n"),ts(1135,"span",20),os(1136,"import"),ns(),os(1137," { "),ts(1138,"span",21),os(1139,"interval"),ns(),os(1140," } "),ts(1141,"span",20),os(1142,"from"),ns(),os(1143," "),ts(1144,"span",22),os(1145,'"rxjs"'),ns(),os(1146,";\n\n@"),ts(1147,"span",24),os(1148,"Injectable"),ns(),os(1149,"()\n"),ts(1150,"span",20),os(1151,"export"),ns(),os(1152," "),ts(1153,"span",20),os(1154,"class"),ns(),os(1155," "),ts(1156,"span",24),os(1157,"LocationService"),ns(),os(1158," {\n    "),ts(1159,"span",20),os(1160,"constructor"),ns();os(1161,"("),ts(1162,"span",25),os(1163,"ngZone"),ns(),ts(1164,"span",20),os(1165,":"),ns(),os(1166," "),ts(1167,"span",24),os(1168,"NgZone"),ns(),os(1169,") {\n\t\t"),ts(1170,"span",21),os(1171,"ngZone"),ns(),os(1172,"."),ts(1173,"span",24),os(1174,"runOutsideAngular"),ns(),os(1175,"(() "),ts(1176,"span",20),os(1177,"=>"),ns(),os(1178," "),ts(1179,"span",24),os(1180,"interval"),ns(),os(1181,"("),ts(1182,"span",23),os(1183,"1000"),ns(),os(1184,")."),ts(1185,"span",24),os(1186,"subscribe"),ns(),os(1187,"(() "),ts(1188,"span",20),os(1189,"=>"),ns(),os(1190," {\n    "),ts(1191,"span",20),os(1192,"..."),ns(),os(1193,"\n\t\t}));\n\t}\n}"),ns(),ns(),ts(1194,"p"),os(1195," This code does not affect the application's stability, but the callback passed to subscribe will continue to be called if the application is destroyed on the server. Each launch of the application on the server will leave behind an artifact in the form of an interval. And this is a potential memory leak. "),ns(),ts(1196,"h3"),os(1197,"Possible Solution"),ns(),ts(1198,"p"),os(1199," In our case, the problem is solved by using the ngOnDestoroy hook. It works for both components and services. We need to save the subscription and terminate it when the service is destructed. There are many techniques for unsubscribing, but here is just one: "),ns(),ts(1200,"pre"),ts(1201,"code",19),ts(1202,"span",20),os(1203,"import"),ns(),os(1204," { "),ts(1205,"span",21),os(1206,"Injectable"),ns(),os(1207,", "),ts(1208,"span",21),os(1209,"NgZone"),ns(),os(1210,", "),ts(1211,"span",21),os(1212,"OnDestroy"),ns(),os(1213," } "),ts(1214,"span",20),os(1215,"from"),ns(),os(1216," "),ts(1217,"span",22),os(1218,'"@angular/core"'),ns(),os(1219,";\n"),ts(1220,"span",20),os(1221,"import"),ns(),os(1222," { "),ts(1223,"span",21),os(1224,"interval"),ns(),os(1225,", "),ts(1226,"span",21),os(1227,"Subscription"),ns(),os(1228," } "),ts(1229,"span",20),os(1230,"from"),ns(),os(1231," "),ts(1232,"span",22),os(1233,'"rxjs"'),ns(),os(1234,";\n\n@"),ts(1235,"span",24),os(1236,"Injectable"),ns(),os(1237,"()\n"),ts(1238,"span",20),os(1239,"export"),ns(),os(1240," "),ts(1241,"span",20),os(1242,"class"),ns(),os(1243," "),ts(1244,"span",24),os(1245,"LocationService"),ns(),os(1246," "),ts(1247,"span",20),os(1248,"implements"),ns(),os(1249," "),ts(1250,"span",24),os(1251,"OnDestroy"),ns(),os(1252," {\n    "),ts(1253,"span",20),os(1254,"private"),ns(),os(1255," subscription"),ts(1256,"span",20),os(1257,":"),ns(),os(1258," "),ts(1259,"span",24),os(1260,"Subscription"),ns(),os(1261,";\n\n    "),ts(1262,"span",20),os(1263,"constructor"),ns(),os(1264,"("),ts(1265,"span",25),os(1266,"ngZone"),ns(),ts(1267,"span",20),os(1268,":"),ns(),os(1269," "),ts(1270,"span",24),os(1271,"NgZone"),ns(),os(1272,") {\n    "),ts(1273,"span",23),os(1274,"this"),ns(),os(1275,"."),ts(1276,"span",21),os(1277,"subscription"),ns(),os(1278," "),ts(1279,"span",20),os(1280,"="),ns(),os(1281," "),ts(1282,"span",21),os(1283,"ngZone"),ns(),os(1284,"."),ts(1285,"span",24),os(1286,"runOutsideAngular"),ns(),os(1287,"(() "),ts(1288,"span",20),os(1289,"=>"),ns(),os(1290,"\n      "),ts(1291,"span",24),os(1292,"interval"),ns(),os(1293,"("),ts(1294,"span",23),os(1295,"1000"),ns(),os(1296,")."),ts(1297,"span",24),os(1298,"subscribe"),ns(),os(1299,"(() "),ts(1300,"span",20),os(1301,"=>"),ns(),os(1302," {})\n    );\n  }\n\n  ngOnDestroy()"),ts(1303,"span",20),os(1304,":"),ns(),os(1305," "),ts(1306,"span",23),os(1307,"void"),ns(),os(1308," {\n    "),ts(1309,"span",23),os(1310,"this"),ns(),os(1311,"."),ts(1312,"span",21),os(1313,"subscription"),ns(),os(1314,"."),ts(1315,"span",24),os(1316,"unsubscribe"),ns(),os(1317,"();\n  }\n}"),ns(),ns(),ts(1318,"h2"),os(1319,"6. Lack of rehydration"),ns(),ts(1320,"h3"),os(1321,"Situation"),ns(),ts(1322,"p"),os(1323," The user's browser displays a page received from the server, a white screen flickers for a moment, and the application starts functioning and looks normal. "),ns(),ts(1324,"h3"),os(1325,"Why is this happening"),ns(),ts(1326,"p"),os(1327," Angular does not know how to reuse what it has rendered on the server. It strips all the HTML from the root element and starts painting all over again. "),ns(),ts(1328,"h3"),os(1329,"Possible Solution"),ns(),ts(1330,"p"),os(1331," It still doesn't exist. But there is hope that there will be a solution. Angular Universal's roadmap has a clause: \"Full client rehydration strategy that reuses DOM elements/CSS rendered on the server\". "),ns(),ts(1332,"h2"),os(1333,"7. Inability to abort rendering"),ns(),ts(1334,"h3"),os(1335,"Situation"),ns(),ts(1336,"p"),os(1337," We are catching a critical error. Rendering and waiting for stability are meaningless. You need to interrupt the process and give the client the default index.html. "),ns(),ts(1338,"h3"),os(1339,"Why is this happening"),ns(),ts(1340,"p"),os(1341," Let's go back to "),ts(1342,"a",16),os(1343,"the moment of rendering the application"),ns(),os(1344,". It occurs when the application becomes stable. We can make our application stable faster using the solution from problem #1. But what if we want to abort the rendering process on the first caught error? What if we want to set a time limit on trying to render an application? "),ns(),ts(1345,"h3"),os(1346,"Possible Solution"),ns(),ts(1347,"p"),os(1348,"There is no solution to this problem now."),ns(),ts(1349,"h1"),os(1350,"Summary"),ns(),ts(1351,"p"),os(1352," Angular Universal is the only supported and most widely used solution for rendering Angular applications on the server. The difficulty of integrating into an existing application depends largely on the developer. "),ns(),ts(1353,"p"),os(1354," There are still unresolved issues that don't allow me to classify Angular Universal as a production-ready solution. It is suitable for landing pages and static pages, but on complex applications, you can collect many problems, the solution of which will break in the blink of the page due to the lack of rehydration. "),ns(),ns()}},styles:[""]}),e})(),Ri=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Re({type:e,bootstrap:[Di]}),e.\u0275inj=J({providers:[],imports:[[Oi.withServerTransition({appId:"serverApp"})]]}),e})();(function(){if(Ho)throw new Error("Cannot enable prod mode after platform setup.");No=!1})(),document.addEventListener("DOMContentLoaded",()=>{Ai().bootstrapModule(Ri).catch(e=>console.error(e))})}},e=>{"use strict";e(e.s=16)}]);